–≤–µ—Å—å –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è : 
–ø–∞–ø–∫–∞ Core (–¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Å–∞) 

namespace ScheduleAppDemo .Core
{
 
    public class ObservableObject : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;

        protected virtual void OnPropertyChanged ([CallerMemberName] string propertyName = null)
        {
            PropertyChanged?.Invoke(this , new PropertyChangedEventArgs(propertyName));
        }

        protected bool SetProperty<T> (ref T field , T value , [CallerMemberName] string propertyName = null)
        {
            if ( EqualityComparer<T> .Default .Equals(field , value) )
                return false;

            field = value;
            OnPropertyChanged(propertyName);
            return true;
        }
    }
}

namespace ScheduleAppDemo .Core
{
 public  class RelayCommand : ICommand
    {
        private readonly Action<object> _execute;
        private readonly Func<object , bool> _canExecute;

        public event EventHandler CanExecuteChanged
        {
            add { CommandManager .RequerySuggested += value; }
            remove { CommandManager .RequerySuggested -= value; }
        }

        public RelayCommand (Action<object> execute , Func<object , bool> canExecute = null)
        {
            _execute = execute ?? throw new ArgumentNullException(nameof(execute));
            _canExecute = canExecute;
        }

        public bool CanExecute (object parameter)
        {
            return _canExecute == null || _canExecute(parameter);
        }

        public void Execute (object parameter)
        {
            _execute(parameter);
        }

        // –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
        public void RaiseCanExecuteChanged ( )
        {
            CommandManager .InvalidateRequerySuggested();
        }
    }
}

–ø–∞–ø–∫–∞ MVVM 
1. Model 
–ø–∞–ø–∫–∞ entitis (11 –∫–ª–∞—Å—Å–æ–≤) 

namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class Admin
    {
        public int AdminId { get; set; }
        public string AdminName { get; set; }
        public string AdminLogin { get; set; }
        public string AdminPassword { get; set; }
        public DateTime? LastLogin { get; set; }
    }
}

namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class Classroom
    {
        public int ClassroomId { get; set; }
        public string RoomNumber { get; set; }
        public string RoomType { get; set; }
        public int? Capacity { get; set; }
        public bool? HasComputers { get; set; }
        public bool? IsSpecial { get; set; }
        public bool? IsActive { get; set; }
    }
}


namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class Group
    {
        public int GroupId { get; set; }
        public string GroupName { get; set; }
        public int SpecialtyId { get; set; }
        public int EnrollmentYear { get; set; }
        public int CurrentYear { get; set; }
        public int? StudentCount { get; set; }
        public bool? IsActive { get; set; }
        public DateTime? CreatedDate { get; set; }
    }
}

{
    public class Schedule
    {
        public int ScheduleId { get; set; }

        // –í–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏
        public int GroupId { get; set; }
        public int TimeslotId { get; set; }
        public int SubjectId { get; set; }
        public int TeacherId { get; set; }
        public int ClassroomId { get; set; }

        // –î–∞–Ω–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è
        public int DayOfWeek { get; set; } // 1-–ü–Ω, 2-–í—Ç, ..., 6-–°–±
        public bool? IsRemote { get; set; }

        // –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
        public virtual Group Group { get; set; }
        public virtual TimeSlot TimeSlot { get; set; }
        public virtual Subject Subject { get; set; }
        public virtual Teacher Teacher { get; set; }
        public virtual Classroom Classroom { get; set; }
    }
}

namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class ScheduleChange
    {
        public int ChangeId { get; set; }
        public int OriginalScheduleId { get; set; }
        public int? NewSubjectId { get; set; }
        public int? NewTeacherId { get; set; }
        public int? NewClassroomId { get; set; }
        public DateTime ChangeDate { get; set; }
        public string Reason { get; set; }
        public bool? IsCancelled { get; set; }
        public DateTime? CreatedDate { get; set; }
    }
}


namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class Specialty
    {
        public int SpecialtyId { get; set; }
        public string SpecialtyName { get; set; }
        public string Abbreviation { get; set; }
        public string Color { get; set; }
        public DateTime? CreatedDate { get; set; }
    }
}


namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class StudyYear
    {
        public int YearId { get; set; }
        public int YearNumber { get; set; }
        public string YearName { get; set; }
    }
}


namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class Subject
    {
        public int SubjectId { get; set; }
        public string SubjectCode { get; set; }
        public string SubjectName { get; set; }
        public int SpecialtyId { get; set; }
        public int StudyYearId { get; set; }
        public int CategoryId { get; set; }
        public int? HoursTotal { get; set; }
        public int? HoursLecture { get; set; }
        public int? HoursPractice { get; set; }
        public bool? HasExam { get; set; }
        public bool? HasPractice { get; set; }
        public bool? IsActive { get; set; }
        public DateTime? CreatedDate { get; set; }
    }
}


namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class SubjectCategory
    {
        public int CategoryId { get; set; }
        public string CategoryName { get; set; }
        public string Description { get; set; }
        public int? DisplayOrder { get; set; }
    }
}


namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public  class Teacher
    {
        public int TeacherId { get; set; }
        public string FullName { get; set; }
        public string Email { get; set; }
        public string Phone { get; set; }
        public bool? IsActive { get; set; }
        public DateTime? CreatedDate { get; set; }
    }
}


namespace ScheduleAppDemo .MVVM .Model .Entities
{
    public class TimeSlot
    {
        public int TimeslotId { get; set; }
        public TimeSpan StartTime { get; set; }
        public TimeSpan EndTime { get; set; }
        public string PeriodName { get; set; }
        public int PeriodOrder { get; set; }
    }
}

–ö–ª–∞—Å—Å DataBaseHelper 
using ScheduleAppDemo .MVVM .Model .Entities;
using System;
using System .Collections .Generic;
using System .Data .SqlClient;
using System .Linq;
using System .Text;
using System .Windows;

namespace ScheduleAppDemo .MVVM .Model
{
    public static class DatabaseHelper
    {
        private static string ConnectionString = @"Data Source=localhost\MSSQLSERVER01;Initial Catalog=schedule database;Integrated Security=True";

        // ==================== –û–°–ù–û–í–ù–´–ï –ú–ï–¢–û–î–´ –î–õ–Ø –†–ê–°–ü–ò–°–ê–ù–ò–Ø ====================
        // === –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–´ ===
        public static Admin GetAdminInfo (string login , string password)
        {
            return ExecuteReader<Admin>(
                "SELECT admin_id, admin_name, admin_login, admin_password, last_login FROM Admins WHERE admin_login = @Login AND admin_password = @Password" ,
                reader => new Admin
                {
                    AdminId = reader .GetInt32(0) ,
                    AdminName = reader .IsDBNull(1) ? null : reader .GetString(1) ,
                    AdminLogin = reader .GetString(2) ,
                    AdminPassword = reader .GetString(3) ,
                    LastLogin = reader .IsDBNull(4) ? null : (DateTime?)reader .GetDateTime(4)
                } ,
                new SqlParameter("@Login" , login) ,
                new SqlParameter("@Password" , password)
            ) .FirstOrDefault(); // –ë–µ—Ä–µ–º –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –∏–ª–∏ null –µ—Å–ª–∏ –Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        }
        // === –î–õ–Ø –†–ï–î–ê–ö–¢–û–†–ê –†–ê–°–ü–ò–°–ê–ù–ò–Ø ===
        public static void DeleteScheduleForGroup (int groupId)
        {
            ExecuteNonQuery(
                "DELETE FROM Schedule WHERE group_id = @GroupId" ,
                new SqlParameter("@GroupId" , groupId)
            );
        }
        public static void AddScheduleItem (Schedule schedule)
        {
            ExecuteNonQuery(@"
        INSERT INTO Schedule (group_id, subject_id, teacher_id, classroom_id, 
                            timeslot_id, day_of_week, is_remote)
        VALUES (@GroupId, @SubjectId, @TeacherId, @ClassroomId, 
                @TimeslotId, @DayOfWeek, @IsRemote)" ,
                new SqlParameter("@GroupId" , schedule .GroupId) ,
                new SqlParameter("@SubjectId" , schedule .SubjectId) ,
                new SqlParameter("@TeacherId" , schedule .TeacherId) ,
                new SqlParameter("@ClassroomId" , schedule .ClassroomId) ,
                new SqlParameter("@TimeslotId" , schedule .TimeslotId) ,
                new SqlParameter("@DayOfWeek" , schedule .DayOfWeek) ,
                new SqlParameter("@IsRemote" , schedule .IsRemote)  // —É–±—Ä–∞–ª–∏ ?? false
            );
        }


        public static List<Schedule> GetScheduleForGroup (int groupId)
        {
            return ExecuteReader<Schedule>(
                "SELECT schedule_id, group_id, subject_id, teacher_id, classroom_id, timeslot_id, day_of_week, is_remote FROM Schedule WHERE group_id = @GroupId ORDER BY day_of_week, timeslot_id" ,
                reader => new Schedule
                {
                    ScheduleId = reader .GetInt32(0) ,
                    GroupId = reader .GetInt32(1) ,
                    SubjectId = reader .GetInt32(2) ,
                    TeacherId = reader .GetInt32(3) ,
                    ClassroomId = reader .GetInt32(4) ,
                    TimeslotId = reader .GetInt32(5) ,
                    DayOfWeek = reader .GetInt32(6) ,
                    IsRemote = reader .IsDBNull(7) ? false : reader .GetBoolean(7)
                } ,
                new SqlParameter("@GroupId" , groupId)
            );
        }
        // === –û–°–ù–û–í–ù–´–ï GET –ú–ï–¢–û–î–´ ===
        public static List<Group> GetAllGroups ( )
        {
            return GetUniqueEntities<Group>(
                "Groups" ,
                "group_id" ,
                reader => new Group
                {
                    GroupId = reader .GetInt32(0) ,
                    GroupName = reader .GetString(1) ,
                    SpecialtyId = reader .GetInt32(2) ,
                    EnrollmentYear = reader .GetInt32(3) ,
                    CurrentYear = reader .GetInt32(4) ,
                    StudentCount = GetNullableInt(reader , 5) ,
                    IsActive = GetNullableBool(reader , 6) ,
                    CreatedDate = GetNullableDateTime(reader , 7)
                } ,
                "group_name" ,
                "group_name"
            );
        }

        public static List<Subject> GetAllSubjects ( )
        {
            return GetUniqueEntities<Subject>(
                "Subjects" ,
                "subject_id" ,
                reader => new Subject
                {
                    SubjectId = reader .GetInt32(0) ,
                    SubjectCode = reader .GetString(1) ,
                    SubjectName = reader .GetString(2) ,
                    SpecialtyId = reader .GetInt32(3) ,
                    StudyYearId = reader .GetInt32(4) ,
                    CategoryId = reader .GetInt32(5) ,
                    HoursTotal = GetNullableInt(reader , 6) ,
                    HoursLecture = GetNullableInt(reader , 7) ,
                    HoursPractice = GetNullableInt(reader , 8) ,
                    HasExam = GetNullableBool(reader , 9) ,
                    HasPractice = GetNullableBool(reader , 10) ,
                    IsActive = GetNullableBool(reader , 11) ,
                    CreatedDate = GetNullableDateTime(reader , 12)
                } ,
                "subject_code, subject_name" ,
                "subject_name"
            );
        }

        public static List<Teacher> GetAllTeachers ( )
        {
            return GetUniqueEntities<Teacher>(
                "Teachers" ,
                "teacher_id" ,
                reader => new Teacher
                {
                    TeacherId = reader .GetInt32(0) ,
                    FullName = reader .GetString(1) ,
                    Email = GetNullableString(reader , 2) ,
                    Phone = GetNullableString(reader , 3) ,
                    IsActive = GetNullableBool(reader , 4) ,
                    CreatedDate = GetNullableDateTime(reader , 5)
                } ,
                "full_name" ,
                "full_name"
            );
        }

        public static List<Classroom> GetAllClassrooms ( )
        {
            return GetUniqueEntities<Classroom>(
                "Classrooms" ,
                "classroom_id" ,
                reader => new Classroom
                {
                    ClassroomId = reader .GetInt32(0) ,
                    RoomNumber = reader .GetString(1) ,
                    RoomType = reader .GetString(2) ,
                    Capacity = GetNullableInt(reader , 3) ,
                    HasComputers = GetNullableBool(reader , 4) ,
                    IsSpecial = GetNullableBool(reader , 5) ,
                    IsActive = GetNullableBool(reader , 6)
                } ,
                "room_number" ,
                "room_number"
            );
        }

        public static List<TimeSlot> GetTimeSlots ( )
        {
            return ExecuteReader<TimeSlot>(
                "SELECT * FROM TimeSlots ORDER BY period_order" ,
                reader => new TimeSlot
                {
                    TimeslotId = reader .GetInt32(0) ,
                    StartTime = reader .GetTimeSpan(1) ,
                    EndTime = reader .GetTimeSpan(2) ,
                    PeriodName = reader .GetString(3) ,
                    PeriodOrder = reader .GetInt32(4)
                }
            );
        }

        // === –î–õ–Ø –û–°–ù–û–í–ù–û–ì–û –†–ê–°–ü–ò–°–ê–ù–ò–Ø ===
        public static List<StudyYear> GetStudyYears ( )
        {
            return ExecuteReader<StudyYear>(
                "SELECT * FROM StudyYears ORDER BY year_number" ,
                reader => new StudyYear
                {
                    YearId = reader .GetInt32(0) ,
                    YearNumber = reader .GetInt32(1) ,
                    YearName = reader .GetString(2)
                }
            );
        }

        public static List<Specialty> GetSpecialtiesByYear (int yearNumber)
        {
            return ExecuteReader<Specialty>(
                @"SELECT DISTINCT s.specialty_id, s.specialty_name, s.abbreviation, s.color, s.created_date
                  FROM Specialties s
                  INNER JOIN Groups g ON s.specialty_id = g.specialty_id
                  WHERE g.current_year = @YearNumber
                  ORDER BY s.specialty_name" ,
                reader => new Specialty
                {
                    SpecialtyId = reader .GetInt32(0) ,
                    SpecialtyName = reader .GetString(1) ,
                    Abbreviation = reader .GetString(2) ,
                    Color = reader .GetString(3) ,
                    CreatedDate = GetNullableDateTime(reader , 4)
                } ,
                new SqlParameter("@YearNumber" , yearNumber)
            );
        }

        public static List<Group> GetGroupsBySpecialtyAndYear (int specialtyId , int yearNumber)
        {
            return ExecuteReader<Group>(
                @"SELECT * FROM Groups 
                  WHERE specialty_id = @SpecialtyId AND current_year = @YearNumber
                  ORDER BY group_name" ,
                reader => new Group
                {
                    GroupId = reader .GetInt32(0) ,
                    GroupName = reader .GetString(1) ,
                    SpecialtyId = reader .GetInt32(2) ,
                    EnrollmentYear = reader .GetInt32(3) ,
                    CurrentYear = reader .GetInt32(4) ,
                    StudentCount = GetNullableInt(reader , 5) ,
                    IsActive = GetNullableBool(reader , 6) ,
                    CreatedDate = GetNullableDateTime(reader , 7)
                } ,
                new SqlParameter("@SpecialtyId" , specialtyId) ,
                new SqlParameter("@YearNumber" , yearNumber)
            );
        }

        // === –ê–£–¢–ï–ù–¢–ò–§–ò–ö–ê–¶–ò–Ø ===
        public static bool ValidateAdmin (string login , string password)
        {
            var result = ExecuteScalar<int>(
                "SELECT COUNT(1) FROM Admins WHERE admin_login = @Login AND admin_password = @Password" ,
                new SqlParameter("@Login" , login) ,
                new SqlParameter("@Password" , password)
            );
            return result > 0;
        }

        // ==================== –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–´–ï –ú–ï–¢–û–î–´ ====================
        private static List<T> GetUniqueEntities<T> (string tableName , string idColumn , Func<SqlDataReader , T> mapper , string groupByColumns , string orderByColumn)
        {
            return ExecuteReader<T>(
                $@"SELECT * FROM {tableName} 
                   WHERE {idColumn} IN (
                       SELECT MIN({idColumn}) 
                       FROM {tableName} 
                       GROUP BY {groupByColumns}
                   )
                   ORDER BY {orderByColumn}" ,
                mapper
            );
        }

        // ==================== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ú–ï–¢–û–î–´ ====================
        private static List<T> ExecuteReader<T> (string query , Func<SqlDataReader , T> mapper , params SqlParameter[] parameters)
        {
            var results = new List<T>();
            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    using ( var command = new SqlCommand(query , connection) )
                    {
                        command .Parameters .AddRange(parameters);

                        using ( var reader = command .ExecuteReader() )
                        {
                            while ( reader .Read() )
                            {
                                results .Add(mapper(reader));
                            }
                        }
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: {ex .Message}");
            }
            return results;
        }

        private static void ExecuteNonQuery (string query , params SqlParameter[] parameters)
        {
            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    using ( var command = new SqlCommand(query , connection) )
                    {
                        command .Parameters .AddRange(parameters);
                        command .ExecuteNonQuery();
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞: {ex .Message}");
                throw;
            }
        }
    
        private static T ExecuteScalar<T> (string query , params SqlParameter[] parameters)
        {
            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    using ( var command = new SqlCommand(query , connection) )
                    {
                        command .Parameters .AddRange(parameters);
                        return (T)command .ExecuteScalar();
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞: {ex .Message}");
                return default(T);
            }
        }

        // –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å nullable –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
        private static int? GetNullableInt (SqlDataReader reader , int ordinal)
        {
            return reader .IsDBNull(ordinal) ? null : (int?)reader .GetInt32(ordinal);
        }

        private static bool? GetNullableBool (SqlDataReader reader , int ordinal)
        {
            return reader .IsDBNull(ordinal) ? null : (bool?)reader .GetBoolean(ordinal);
        }

        private static DateTime? GetNullableDateTime (SqlDataReader reader , int ordinal)
        {
            return reader .IsDBNull(ordinal) ? null : (DateTime?)reader .GetDateTime(ordinal);
        }

        private static string GetNullableString (SqlDataReader reader , int ordinal)
        {
            return reader .IsDBNull(ordinal) ? null : reader .GetString(ordinal);
        }
    }
    
    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–ª–∞—Å—Å—ã –æ—Å—Ç–∞—é—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
    public class ScheduleRow
    {
        public string TimeDisplay { get; set; }
        public int TimeSlotId { get; set; }
        public LessonCell Monday { get; set; } = new LessonCell();
        public LessonCell Tuesday { get; set; } = new LessonCell();
        public LessonCell Wednesday { get; set; } = new LessonCell();
        public LessonCell Thursday { get; set; } = new LessonCell();
        public LessonCell Friday { get; set; } = new LessonCell();
        public LessonCell Saturday { get; set; } = new LessonCell();
    }

    public class LessonCell
    {
        public int? ScheduleId { get; set; }
        public string SubjectName { get; set; } = string .Empty;
        public string TeacherName { get; set; } = string .Empty;
        public string Classroom { get; set; } = string .Empty;
        public string Color { get; set; } = "#F5F5F5";
        public bool IsRemote { get; set; }
        public string ToolTip { get; set; } = string .Empty;
        public int? SubjectId { get; set; }
        public int? TeacherId { get; set; }
        public int? ClassroomId { get; set; }
        public string RemoteIcon => IsRemote ? "üíª " : "";
        public string DisplaySubject => RemoteIcon + (string .IsNullOrEmpty(SubjectName) ? "" : SubjectName);
    }
}

–ü–ê–ü–ö–ê view : 

<UserControl x:Class="ScheduleAppDemo.MVVM.View.EditLessonDialog"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ScheduleAppDemo.MVVM.View"
             mc:Ignorable="d" 
            d:DesignHeight="705" d:DesignWidth="440">
    <UserControl.Resources>
        <Style x:Key="DialogGroupBox" TargetType="GroupBox">
            <Setter Property="Margin" Value="10,5"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="BorderBrush" Value="#FF8C43FF"/>
            <Setter Property="BorderThickness" Value="1"/>
        </Style>
    </UserControl.Resources>

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
            <TextBlock Text="‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è" 
                      FontSize="20" FontWeight="Bold" 
                      Foreground="#FF8C43FF" VerticalAlignment="Center"/>
        </StackPanel>

        <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
            <StackPanel Orientation="Vertical">

                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Ä–µ–º–µ–Ω–∏ -->
                <GroupBox Header="üìÖ –í—Ä–µ–º—è –∏ –¥–µ–Ω—å" Style="{StaticResource DialogGroupBox}">
                    <TextBlock Text="{Binding TimeInfo}" FontSize="14" FontWeight="SemiBold" TextWrapping="Wrap"/>
                </GroupBox>

                <!-- –ü—Ä–µ–¥–º–µ—Ç -->
                <GroupBox Header="üìö –ü—Ä–µ–¥–º–µ—Ç" Style="{StaticResource DialogGroupBox}">
                    <ComboBox ItemsSource="{Binding AvailableSubjects}" 
                             DisplayMemberPath="SubjectName"
                             SelectedValue="{Binding SelectedSubjectId}"
                             SelectedValuePath="SubjectId"
                             Height="35" FontSize="12"/>
                </GroupBox>

                <!-- –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å -->
                <GroupBox Header="üë®‚Äçüè´ –ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å" Style="{StaticResource DialogGroupBox}">
                    <ComboBox ItemsSource="{Binding AvailableTeachers}" 
                             DisplayMemberPath="FullName"
                             SelectedValue="{Binding SelectedTeacherId}"
                             SelectedValuePath="TeacherId"
                             Height="35" FontSize="12"/>
                </GroupBox>

                <!-- –ö–∞–±–∏–Ω–µ—Ç -->
                <GroupBox Header="üè´ –ö–∞–±–∏–Ω–µ—Ç" Style="{StaticResource DialogGroupBox}">
                    <ComboBox ItemsSource="{Binding AvailableClassrooms}" 
                             DisplayMemberPath="RoomNumber"
                             SelectedValue="{Binding SelectedClassroomId}"
                             SelectedValuePath="ClassroomId"
                             Height="35" FontSize="12"/>
                </GroupBox>

                <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏ -->
                <GroupBox Header="‚öôÔ∏è –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ" Style="{StaticResource DialogGroupBox}">
                    <CheckBox Content="üíª –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–µ –∑–∞–Ω—è—Ç–∏–µ" 
                             IsChecked="{Binding IsRemote}"
                             FontSize="12"
                             Margin="0,5"/>
                </GroupBox>

                <!-- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä -->
                <GroupBox Header="üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" Style="{StaticResource DialogGroupBox}">
                    <Border Background="{Binding PreviewColor}" 
                           CornerRadius="5" 
                           Padding="15" 
                           Margin="2"
                           Height="80">
                        <StackPanel>
                            <TextBlock Text="{Binding PreviewSubject}" 
                                      FontWeight="SemiBold" 
                                      FontSize="12"
                                      TextWrapping="Wrap"/>
                            <TextBlock Text="{Binding PreviewTeacher}" 
                                      FontSize="10"
                                      Foreground="#666"
                                      Margin="0,2,0,0"/>
                            <TextBlock Text="{Binding PreviewClassroom}" 
                                      FontSize="10"
                                      Foreground="#666"/>
                        </StackPanel>
                    </Border>
                </GroupBox>
            </StackPanel>
        </ScrollViewer>

        <!-- –ö–Ω–æ–ø–∫–∏ -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
            <Button Content="‚ùå –û—Ç–º–µ–Ω–∞" 
                    Click="CancelButton_Click"
                    Width="120" Height="35" 
                    Background="#FF9E9E9E" 
                    Foreground="White"
                    FontSize="12"
                    Margin="0,0,10,0"/>
            <Button Content="‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å" 
                    Click="SaveButton_Click"
                    Width="120" Height="35" 
                    Background="#FF4CAF50" 
                    Foreground="White"
                    FontSize="12" FontWeight="SemiBold"/>
        </StackPanel>
    </Grid>
</UserControl>

namespace ScheduleAppDemo .MVVM .View
{
    /// <summary>
    /// –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è EditLessonDialog.xaml
    /// </summary>
    public partial class EditLessonDialog : UserControl
    {
        public EditLessonViewModel ViewModel => (EditLessonViewModel)DataContext;

        // –°–æ–±—ã—Ç–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∏–∞–ª–æ–≥–æ–º
        public event RoutedEventHandler SaveClicked;
        public event RoutedEventHandler CancelClicked;

        public EditLessonDialog ( )
        {
            InitializeComponent();
        }

        private void SaveButton_Click (object sender , RoutedEventArgs e)
        {
            if ( ViewModel .SaveChanges() )
            {
                SaveClicked?.Invoke(this , new RoutedEventArgs());
            }
        }

        private void CancelButton_Click (object sender , RoutedEventArgs e)
        {
            CancelClicked?.Invoke(this , new RoutedEventArgs());
        }
    }
}

<UserControl x:Class="ScheduleAppDemo.MVVM.View.ScheduleEditorView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ScheduleAppDemo.MVVM.View"
             mc:Ignorable="d" 
                        d:DesignHeight="705" d:DesignWidth="880">

    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- –®–∞–ø–∫–∞ —Å –≤—ã–±–æ—Ä–æ–º –≥—Ä—É–ø–ø—ã -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,15">
            <TextBlock Text="‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è" 
                      FontSize="22" FontWeight="Bold" 
                      Foreground="#FF8C43FF" VerticalAlignment="Center"/>

            <ComboBox ItemsSource="{Binding Groups}" 
                     DisplayMemberPath="GroupName"
                     SelectedItem="{Binding SelectedGroup}"
                     Width="200" Height="30" FontSize="12"
                     Margin="20,0,0,0"/>
        </StackPanel>

        <!-- –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è 6√ó6 -->
        <DataGrid Grid.Row="1" 
                 ItemsSource="{Binding ScheduleTable}"
                 AutoGenerateColumns="False"
                 CanUserAddRows="False"
                 IsReadOnly="True"
                 HeadersVisibility="Column"
                 RowHeight="65"
                 SelectionUnit="Cell"
                 SelectionMode="Single">

            <DataGrid.Columns>
                <!-- –ö–æ–ª–æ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ -->
                <DataGridTextColumn Header="–í—Ä–µ–º—è" 
                                   Binding="{Binding TimeDisplay}"
                                   Width="80" IsReadOnly="True"/>

                <!-- –ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ -->
                <DataGridTemplateColumn Header="–ü–Ω" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Background="{Binding Monday.Color}" 
                                   CornerRadius="3" Padding="5" Margin="1"
                                   MouseLeftButtonDown="Cell_MouseLeftButtonDown"
                                   Tag="1">
                                <TextBlock Text="{Binding Monday.DisplaySubject}" 
                                          FontSize="10" TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- –í—Ç–æ—Ä–Ω–∏–∫ -->
                <DataGridTemplateColumn Header="–í—Ç" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Background="{Binding Tuesday.Color}" 
                                   CornerRadius="3" Padding="5" Margin="1"
                                   MouseLeftButtonDown="Cell_MouseLeftButtonDown"
                                   Tag="2">
                                <TextBlock Text="{Binding Tuesday.DisplaySubject}" 
                                          FontSize="10" TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

           
                <DataGridTemplateColumn Header="–°—Ä" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Background="{Binding Wednesday.Color}" 
                                   CornerRadius="3" Padding="5" Margin="1"
                                   MouseLeftButtonDown="Cell_MouseLeftButtonDown"
                                   Tag="3">
                                <TextBlock Text="{Binding Wednesday.DisplaySubject}" 
                                          FontSize="10" TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- –ß–µ—Ç–≤–µ—Ä–≥ -->
                <DataGridTemplateColumn Header="–ß—Ç" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Background="{Binding Thursday.Color}" 
                                   CornerRadius="3" Padding="5" Margin="1"
                                   MouseLeftButtonDown="Cell_MouseLeftButtonDown"
                                   Tag="4">
                                <TextBlock Text="{Binding Thursday.DisplaySubject}" 
                                          FontSize="10" TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- –ü—è—Ç–Ω–∏—Ü–∞ -->
                <DataGridTemplateColumn Header="–ü—Ç" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Background="{Binding Friday.Color}" 
                                   CornerRadius="3" Padding="5" Margin="1"
                                   MouseLeftButtonDown="Cell_MouseLeftButtonDown"
                                   Tag="5">
                                <TextBlock Text="{Binding Friday.DisplaySubject}" 
                                          FontSize="10" TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <!-- –°—É–±–±–æ—Ç–∞ -->
                <DataGridTemplateColumn Header="–°–±" Width="120">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Border Background="{Binding Saturday.Color}" 
                                   CornerRadius="3" Padding="5" Margin="1"
                                   MouseLeftButtonDown="Cell_MouseLeftButtonDown"
                                   Tag="6">
                                <TextBlock Text="{Binding Saturday.DisplaySubject}" 
                                          FontSize="10" TextWrapping="Wrap"
                                          TextAlignment="Center"/>
                            </Border>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,15,0,0">
            <Button Content="üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ" 
                    Command="{Binding SaveScheduleCommand}"
                    Width="160" Height="35" 
                    Background="#FF2196F3" 
                    Foreground="White"
                    FontSize="12" FontWeight="SemiBold"
                    Margin="0,0,10,0"/>

            <Button Content="üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë" 
                    Command="{Binding ClearScheduleCommand}"
                    Width="120" Height="35" 
                    Background="#FF9E9E9E" 
                    Foreground="White"
                    FontSize="12"
                    Margin="0,0,10,0"/>
        </StackPanel>
    </Grid>
</UserControl>

using ScheduleAppDemo .MVVM .ViewModel;
using System;
using System .Collections .Generic;
using System .Linq;
using System .Text;
using System .Threading .Tasks;
using System .Windows;
using System .Windows .Controls;
using System .Windows .Data;
using System .Windows .Documents;
using System .Windows .Input;
using System .Windows .Media;
using System .Windows .Media .Imaging;
using System .Windows .Navigation;
using System .Windows .Shapes;

namespace ScheduleAppDemo .MVVM .View
{
    /// <summary>
    /// –õ–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è ScheduleEditorView.xaml
    /// </summary>
    public partial class ScheduleEditorView : UserControl
    {
        public ScheduleEditorView ( )
        {
            InitializeComponent();
        }

        private void Cell_MouseLeftButtonDown (object sender , MouseButtonEventArgs e)
        {
            if ( sender is Border border && border .DataContext is Model .ScheduleRow row )
            {
                int dayOfWeek = int .Parse(border .Tag .ToString());
                int timeSlotId = row .TimeSlotId;

                var cell = GetCellByDay(row , dayOfWeek);

                var viewModel = (ScheduleEditorViewModel)DataContext;
                viewModel .UpdateSelectedCell(cell , dayOfWeek , timeSlotId);
            }
        }

        private Model .LessonCell GetCellByDay (Model .ScheduleRow row , int dayOfWeek)
        {
            switch ( dayOfWeek )
            {
                case 1: return row .Monday;
                case 2: return row .Tuesday;
                case 3: return row .Wednesday;
                case 4: return row .Thursday;
                case 5: return row .Friday;
                case 6: return row .Saturday;
                default: return null;
            }
        }
    }
}
<UserControl x:Class="ScheduleAppDemo.MVVM.View.MainScheduleView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ScheduleAppDemo.MVVM.View"
             mc:Ignorable="d" 
             d:DesignHeight="705" d:DesignWidth="880">
    <Grid>
        <Border CornerRadius="20" 
              Margin="5,5,5,5">
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                    <GradientStop Color="#FFFFB253"/>
                    <GradientStop Color="#FF5A00E1" Offset="0.355"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border Margin="10" CornerRadius="15" Background="White" Opacity="0.2">
            </Border>
        </Border>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition/>
                <RowDefinition Height="600"/>
            </Grid.RowDefinitions>

            <ComboBox 
                x:Name="cmbCourse"
                Margin="41,62,695,27"
                Style="{ StaticResource RoundedComboBoxTheme}"
                Background="#FFFFC096"
                BorderBrush="White"/>


            <ComboBox 
                x:Name="cmbSpecialty"
                Margin="220,62,440,27"
                Style="{StaticResource RoundedComboBoxTheme}"
                Background="#FFFFC096"
                BorderBrush="White" Foreground="{x:Null}"/>
            <ComboBox 
                x:Name="cmbGroup"
                Margin="482,62,238,27"
                Style="{StaticResource RoundedComboBoxTheme}"
                Background="#FFFFC096"
                BorderBrush="White"/>
            <Button
                x:Name="btnLoad"
                Content="–ó–∞–≥—Ä—É–∑–∏—Ç—å"
                Width="200" Margin="660,20,20,27" Foreground="White" BorderBrush="White" Background="#FF1E1E1E" FontSize="20">
                <Button.Resources>
                    <Style TargetType="Border">
                        <Setter Property="CornerRadius" Value="13"/>
                    </Style>
                </Button.Resources>
            </Button>
            <TextBlock Text="–ö—É—Ä—Å—ã"
                       FontSize="20" 
                       Margin="41,31,0,43" 
                       Foreground="White"
                       HorizontalAlignment="Left" 
                       FontWeight="Bold" 
                       Width="144"
                       />
            <TextBlock Text="–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å"
            FontSize="20" 
            Margin="220,30,0,44"
                       Foreground="White"
                       HorizontalAlignment="Left" 
                       FontWeight="Bold"
            />
            <TextBlock Text="–ì—Ä—É–ø–ø–∞"
            FontSize="20" 
            Margin="482,30,0,44" 
            Foreground="White" 
            HorizontalAlignment="Left"
            FontWeight="Bold"
            />
            <Border Grid.Row="1" 
        BorderThickness="2" 
        CornerRadius="10" 
        Background="White"
        Margin="15,0,15,15"
        Padding="1" 
        BorderBrush="#FF1E1E1E">
                <DataGrid x:Name="dataGrid"         
              Style="{StaticResource SimpleRoundedDataGrid}"
              AutoGenerateColumns="False"
              CanUserAddRows="False" 
              Margin="7,7,7,7" Background="White" BorderBrush="Black" Foreground="Black"
             >
                    <DataGrid.Columns>

                        <DataGridTextColumn Header="–í—Ä–µ–º—è" 
                               Width="100" 
                               Binding="{Binding TimeDisplay}"
                               IsReadOnly="True"
                               HeaderStyle="{StaticResource DataGridHeaderStyle}"/>
                        <DataGridTemplateColumn Header="–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫" Width="150"
                                   HeaderStyle="{StaticResource DataGridHeaderStyle}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{Binding Monday.Color}" 
                               CornerRadius="5" 
                               Padding="8,5" 
                               Margin="2"
                               ToolTip="{Binding Monday.ToolTip}">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Monday.SubjectName}" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          TextWrapping="Wrap"/>
                                            <TextBlock Text="{Binding Monday.TeacherName}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                            <TextBlock Text="{Binding Monday.Classroom}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="–í—Ç–æ—Ä–Ω–∏–∫" Width="150"
                                   HeaderStyle="{StaticResource DataGridHeaderStyle}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{Binding Tuesday.Color}" 
                               CornerRadius="5" 
                               Padding="8,5" 
                               Margin="2"
                               ToolTip="{Binding Tuesday.ToolTip}">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Tuesday.SubjectName}" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          TextWrapping="Wrap"/>
                                            <TextBlock Text="{Binding Tuesday.TeacherName}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                            <TextBlock Text="{Binding Tuesday.Classroom}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="–°—Ä–µ–¥–∞" Width="150"
                                   HeaderStyle="{StaticResource DataGridHeaderStyle}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{Binding Wednesday.Color}" 
                               CornerRadius="5" 
                               Padding="8,5" 
                               Margin="2"
                               ToolTip="{Binding Wednesday.ToolTip}">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Wednesday.SubjectName}" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          TextWrapping="Wrap"/>
                                            <TextBlock Text="{Binding Wednesday.TeacherName}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                            <TextBlock Text="{Binding Wednesday.Classroom}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                        <DataGridTemplateColumn Header="–ß–µ—Ç–≤–µ—Ä–≥" Width="150"
                                   HeaderStyle="{StaticResource DataGridHeaderStyle}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{Binding Thursday.Color}" 
                               CornerRadius="5" 
                               Padding="8,5" 
                               Margin="2"
                               ToolTip="{Binding Thursday.ToolTip}">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Thursday.SubjectName}" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          TextWrapping="Wrap"/>
                                            <TextBlock Text="{Binding Thursday.TeacherName}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                            <TextBlock Text="{Binding Thursday.Classroom}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <DataGridTemplateColumn Header="–ü—è—Ç–Ω–∏—Ü–∞" Width="150"
                                   HeaderStyle="{StaticResource DataGridHeaderStyle}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{Binding Friday.Color}" 
                               CornerRadius="5" 
                               Padding="8,5" 
                               Margin="2"
                               ToolTip="{Binding Friday.ToolTip}">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Friday.SubjectName}" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          TextWrapping="Wrap"/>
                                            <TextBlock Text="{Binding Friday.TeacherName}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                            <TextBlock Text="{Binding Friday.Classroom}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>

                        <!-- –°—É–±–±–æ—Ç–∞ -->
                        <DataGridTemplateColumn Header="–°—É–±–±–æ—Ç–∞" Width="150"
                                   HeaderStyle="{StaticResource DataGridHeaderStyle}">
                            <DataGridTemplateColumn.CellTemplate>
                                <DataTemplate>
                                    <Border Background="{Binding Saturday.Color}" 
                               CornerRadius="5" 
                               Padding="8,5" 
                               Margin="2"
                               ToolTip="{Binding Saturday.ToolTip}">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Saturday.SubjectName}" 
                                          FontWeight="SemiBold" 
                                          FontSize="12"
                                          TextWrapping="Wrap"/>
                                            <TextBlock Text="{Binding Saturday.TeacherName}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                            <TextBlock Text="{Binding Saturday.Classroom}" 
                                          FontSize="10"
                                          Foreground="#666"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </DataGridTemplateColumn.CellTemplate>
                        </DataGridTemplateColumn>
                    </DataGrid.Columns>
                </DataGrid>
            </Border>
        </Grid>
    </Grid>
</UserControl>



–ü–ê–ü–ö–ê ViewModel 
using ScheduleAppDemo .Core;
using ScheduleAppDemo .MVVM .Model;
using ScheduleAppDemo .MVVM .Model .Entities;
using System;
using System .Collections .Generic;
using System .Collections .ObjectModel;
using System .Linq;
using System .Text;
using System .Threading .Tasks;
using System .Windows;

namespace ScheduleAppDemo .MVVM .ViewModel
{
    public class EditLessonViewModel : ObservableObject
    {
        private readonly ScheduleEditorViewModel _parentViewModel;
        private readonly LessonCell _originalCell;
        private readonly int _dayOfWeek;
        private readonly int _timeSlotId;

        public ObservableCollection<Subject> AvailableSubjects { get; set; }
        public ObservableCollection<Teacher> AvailableTeachers { get; set; }
        public ObservableCollection<Classroom> AvailableClassrooms { get; set; }

        private int? _selectedSubjectId;
        private int? _selectedTeacherId;
        private int? _selectedClassroomId;
        private bool _isRemote;

        public int? SelectedSubjectId
        {
            get => _selectedSubjectId;
            set
            {
                SetProperty(ref _selectedSubjectId , value);
                UpdatePreview();
            }
        }

        public int? SelectedTeacherId
        {
            get => _selectedTeacherId;
            set
            {
                SetProperty(ref _selectedTeacherId , value);
                UpdatePreview();
            }
        }

        public int? SelectedClassroomId
        {
            get => _selectedClassroomId;
            set
            {
                SetProperty(ref _selectedClassroomId , value);
                UpdatePreview();
            }
        }

        public bool IsRemote
        {
            get => _isRemote;
            set => SetProperty(ref _isRemote , value);
        }

        // –°–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞
        public string TimeInfo { get; set; }
        public string PreviewSubject { get; set; }
        public string PreviewTeacher { get; set; }
        public string PreviewClassroom { get; set; }
        public string PreviewColor { get; set; } = "#F5F5F5";

        public EditLessonViewModel (ScheduleEditorViewModel parentViewModel , LessonCell cell , int dayOfWeek , int timeSlotId)
        {
            _parentViewModel = parentViewModel;
            _originalCell = cell;
            _dayOfWeek = dayOfWeek;
            _timeSlotId = timeSlotId;

            AvailableSubjects = new ObservableCollection<Subject>(parentViewModel .Subjects);
            AvailableTeachers = new ObservableCollection<Teacher>(parentViewModel .Teachers);
            AvailableClassrooms = new ObservableCollection<Classroom>(parentViewModel .Classrooms);

            // –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è
            SelectedSubjectId = cell .SubjectId;
            SelectedTeacherId = cell .TeacherId;
            SelectedClassroomId = cell .ClassroomId;
            IsRemote = cell .IsRemote;

            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤—Ä–µ–º–µ–Ω–∏
            SetTimeInfo(dayOfWeek , timeSlotId);
            UpdatePreview();
        }

        private void SetTimeInfo (int dayOfWeek , int timeSlotId)
        {
            string dayName = GetDayName(dayOfWeek);
            var timeSlot = _parentViewModel .TimeSlots .FirstOrDefault(t => t .TimeslotId == timeSlotId);
            string timeInfo = timeSlot != null ?
                $"{timeSlot .StartTime:hh\\:mm}-{timeSlot .EndTime:hh\\:mm} ({timeSlot .PeriodName})" :
                $"–ü–∞—Ä–∞ {timeSlotId}";

            TimeInfo = $"{dayName}, {timeInfo}";
        }

        private string GetDayName (int dayOfWeek)
        {
            switch ( dayOfWeek )
            {
                case 1: return "–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫";
                case 2: return "–í—Ç–æ—Ä–Ω–∏–∫";
                case 3: return "–°—Ä–µ–¥–∞";
                case 4: return "–ß–µ—Ç–≤–µ—Ä–≥";
                case 5: return "–ü—è—Ç–Ω–∏—Ü–∞";
                case 6: return "–°—É–±–±–æ—Ç–∞";
                default: return "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –¥–µ–Ω—å";
            }
        }

        private void UpdatePreview ( )
        {
            var subject = AvailableSubjects .FirstOrDefault(s => s .SubjectId == SelectedSubjectId);
            var teacher = AvailableTeachers .FirstOrDefault(t => t .TeacherId == SelectedTeacherId);
            var classroom = AvailableClassrooms .FirstOrDefault(c => c .ClassroomId == SelectedClassroomId);

            PreviewSubject = subject?.SubjectName ?? "–ù–µ –≤—ã–±—Ä–∞–Ω";
            PreviewTeacher = teacher?.FullName ?? "–ù–µ –≤—ã–±—Ä–∞–Ω";
            PreviewClassroom = classroom?.RoomNumber ?? "–ù–µ –≤—ã–±—Ä–∞–Ω";
            PreviewColor = GetLessonColor(SelectedSubjectId);

            OnPropertyChanged(nameof(PreviewSubject));
            OnPropertyChanged(nameof(PreviewTeacher));
            OnPropertyChanged(nameof(PreviewClassroom));
            OnPropertyChanged(nameof(PreviewColor));
        }

        public bool SaveChanges ( )
        {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
            if ( SelectedSubjectId == null || SelectedTeacherId == null || SelectedClassroomId == null )
            {
                MessageBox .Show("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: –ø—Ä–µ–¥–º–µ—Ç, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –∏ –∫–∞–±–∏–Ω–µ—Ç" , "–í–Ω–∏–º–∞–Ω–∏–µ");
                return false;
            }

            // –°–æ–∑–¥–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —è—á–µ–π–∫—É
            var updatedCell = new LessonCell
            {
                SubjectId = SelectedSubjectId ,
                TeacherId = SelectedTeacherId ,
                ClassroomId = SelectedClassroomId ,
                IsRemote = IsRemote ,
                Color = PreviewColor
            };

            // –ó–∞–ø–æ–ª–Ω—è–µ–º –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
            var subject = AvailableSubjects .FirstOrDefault(s => s .SubjectId == SelectedSubjectId);
            var teacher = AvailableTeachers .FirstOrDefault(t => t .TeacherId == SelectedTeacherId);
            var classroom = AvailableClassrooms .FirstOrDefault(c => c .ClassroomId == SelectedClassroomId);

            updatedCell .SubjectName = subject?.SubjectName ?? "";
            updatedCell .TeacherName = teacher?.FullName ?? "";
            updatedCell .Classroom = classroom?.RoomNumber ?? "";
            updatedCell .ToolTip = $"{updatedCell .SubjectName}\n{updatedCell .TeacherName}\n{updatedCell .Classroom}";

            if ( IsRemote )
            {
                updatedCell .ToolTip += "\nüíª –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ";
            }

            // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π ViewModel
            _parentViewModel .ApplyLessonEdit(updatedCell , _dayOfWeek , _timeSlotId);

            return true;
        }

        private string GetLessonColor (int? subjectId)
        {
            if ( subjectId == null ) return "#F5F5F5";

            var subject = AvailableSubjects .FirstOrDefault(s => s .SubjectId == subjectId);
            if ( subject == null ) return "#F5F5F5";

            switch ( subject .CategoryId )
            {
                case 1: return "#E3F2FD";
                case 2: return "#E8F5E8";
                case 3: return "#FFF3E0";
                case 4: return "#F3E5F5";
                case 5: return "#E0F2F1";
                case 6: return "#FFEBEE";
                case 7: return "#ECEFF1";
                default: return "#F5F5F5";
            }
        }
    }
}
using ScheduleAppDemo .Core;
using ScheduleAppDemo .MVVM .Model;
using ScheduleAppDemo .MVVM .Model .Entities;
using System;
using System .Collections .Generic;
using System .Collections .ObjectModel;
using System .Linq;
using System .Text;
using System .Threading .Tasks;
using System .Windows;
using System .Windows .Input;


namespace ScheduleAppDemo .MVVM .ViewModel
{
    public class MainScheduleViewModel : ObservableObject
    {
        // –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è ComboBox
        public ObservableCollection<StudyYear> Courses { get; set; }
        public ObservableCollection<Specialty> Specialties { get; set; }
        public ObservableCollection<Group> Groups { get; set; }

        // –í—ã–±—Ä–∞–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        private StudyYear _selectedCourse;
        private Specialty _selectedSpecialty;
        private Group _selectedGroup;

        public StudyYear SelectedCourse
        {
            get => _selectedCourse;
            set
            {
                if ( SetProperty(ref _selectedCourse , value) )
                {
                    OnCourseSelected();
                }
            }
        }

        public Specialty SelectedSpecialty
        {
            get => _selectedSpecialty;
            set
            {
                if ( SetProperty(ref _selectedSpecialty , value) )
                {
                    OnSpecialtySelected();
                }
            }
        }

        public Group SelectedGroup
        {
            get => _selectedGroup;
            set
            {
                if ( SetProperty(ref _selectedGroup , value) )
                {
                    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
                    CommandManager .InvalidateRequerySuggested();
                }
            }
        }

        // –î–∞–Ω–Ω—ã–µ –¥–ª—è DataGrid
        public ObservableCollection<ScheduleRow> ScheduleRows { get; set; }

        // –ö–æ–º–∞–Ω–¥—ã
        public ICommand LoadScheduleCommand { get; }

        // –ö—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
        private List<TimeSlot> _timeSlots;
        private List<Subject> _subjects;
        private List<Teacher> _teachers;
        private List<Classroom> _classrooms;

        public MainScheduleViewModel ( )
        {
            Courses = new ObservableCollection<StudyYear>();
            Specialties = new ObservableCollection<Specialty>();
            Groups = new ObservableCollection<Group>();
            ScheduleRows = new ObservableCollection<ScheduleRow>();

            LoadScheduleCommand = new RelayCommand(
                execute: _ => LoadSchedule() ,
                canExecute: _ => SelectedGroup != null
            );

            LoadInitialData();
        }

        private void LoadInitialData ( )
        {
            try
            {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –∫—É—Ä—Å—ã
                var courses = DatabaseHelper .GetStudyYears();
                Courses .Clear();
                foreach ( var course in courses )
                {
                    Courses .Add(course);
                }

                // –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
                _timeSlots = DatabaseHelper .GetTimeSlots();
                _subjects = DatabaseHelper .GetAllSubjects();
                _teachers = DatabaseHelper .GetAllTeachers();
                _classrooms = DatabaseHelper .GetAllClassrooms();
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö: {ex .Message}");
            }
        }

        private void OnCourseSelected ( )
        {
            if ( SelectedCourse == null ) return;

            try
            {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –∫—É—Ä—Å–∞
                var specialties = DatabaseHelper .GetSpecialtiesByYear(SelectedCourse .YearNumber);
                Specialties .Clear();
                foreach ( var specialty in specialties )
                {
                    Specialties .Add(specialty);
                }

                // –û—á–∏—â–∞–µ–º –≥—Ä—É–ø–ø—ã
                Groups .Clear();
                SelectedSpecialty = null;
                SelectedGroup = null;
                ScheduleRows .Clear();
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–µ–π: {ex .Message}");
            }
        }

        private void OnSpecialtySelected ( )
        {
            if ( SelectedSpecialty == null || SelectedCourse == null ) return;

            try
            {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –≥—Ä—É–ø–ø—ã –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫—É—Ä—Å–∞
                var groups = DatabaseHelper .GetGroupsBySpecialtyAndYear(
                    SelectedSpecialty .SpecialtyId ,
                    SelectedCourse .YearNumber
                );

                Groups .Clear();
                foreach ( var group in groups )
                {
                    Groups .Add(group);
                }

                SelectedGroup = null;
                ScheduleRows .Clear();
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≥—Ä—É–ø–ø: {ex .Message}");
            }
        }

        private void LoadSchedule ( )
        {
            if ( SelectedGroup == null ) return;

            try
            {
                // 1. –ü–æ–ª—É—á–∞–µ–º Entity —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∏–∑ –ë–î
                var scheduleEntities = DatabaseHelper .GetScheduleForGroup(SelectedGroup .GroupId);

                // 2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ ScheduleRow –¥–ª—è DataGrid
                var scheduleRows = ConvertToScheduleRows(scheduleEntities);

                // 3. –û–±–Ω–æ–≤–ª—è–µ–º DataGrid
                ScheduleRows .Clear();
                foreach ( var row in scheduleRows )
                {
                    ScheduleRows .Add(row);
                }

                MessageBox .Show($"‚úÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ –¥–ª—è –≥—Ä—É–ø–ø—ã {SelectedGroup .GroupName}\n–ù–∞–π–¥–µ–Ω–æ {scheduleEntities .Count} –∑–∞–Ω—è—Ç–∏–π");
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è: {ex .Message}");
            }
        }
        private List<ScheduleRow> ConvertToScheduleRows (List<Schedule> scheduleEntities)
        {
            var rows = new List<ScheduleRow>();

            if ( _timeSlots == null || _timeSlots .Count == 0 )
            {
                MessageBox .Show("–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã");
                return rows;
            }

            // –°–æ–∑–¥–∞–µ–º —Å—Ç—Ä–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å–ª–æ—Ç–∞
            foreach ( var timeSlot in _timeSlots .OrderBy(ts => ts .PeriodOrder) )
            {
                var row = new ScheduleRow
                {
                    TimeDisplay = $"{timeSlot .StartTime:hh\\:mm}-{timeSlot .EndTime:hh\\:mm}\n{timeSlot .PeriodName}" ,
                    TimeSlotId = timeSlot .TimeslotId
                };

                // –ó–∞–ø–æ–ª–Ω—è–µ–º —è—á–µ–π–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –¥–Ω—è –Ω–µ–¥–µ–ª–∏
                for ( int day = 1 ; day <= 6 ; day++ )
                {
                    var lesson = scheduleEntities .FirstOrDefault(s =>
                        s .TimeslotId == timeSlot .TimeslotId && s .DayOfWeek == day);

                    if ( lesson != null )
                    {
                        var lessonCell = CreateLessonCell(lesson);
                        SetDayCell(row , day , lessonCell);
                    }
                }

                rows .Add(row);
            }

            return rows;
        }

        private LessonCell CreateLessonCell (Schedule schedule)
        {
            var subject = _subjects?.FirstOrDefault(s => s .SubjectId == schedule .SubjectId);
            var teacher = _teachers?.FirstOrDefault(t => t .TeacherId == schedule .TeacherId);
            var classroom = _classrooms?.FirstOrDefault(c => c .ClassroomId == schedule .ClassroomId);

            string subjectName = subject?.SubjectName ?? "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç";
            string teacherName = teacher?.FullName ?? "–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å –Ω–µ —É–∫–∞–∑–∞–Ω";
            string classroomNumber = classroom?.RoomNumber ?? "–ö–∞–±–∏–Ω–µ—Ç –Ω–µ —É–∫–∞–∑–∞–Ω";

            // –û–±—Ä–µ–∑–∞–µ–º –¥–ª–∏–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤
            if ( subjectName .Length > 30 )
                subjectName = subjectName .Substring(0 , 27) + "...";

            return new LessonCell
            {
                ScheduleId = schedule .ScheduleId ,
                SubjectName = subjectName ,
                TeacherName = teacherName ,
                Classroom = classroomNumber ,
                SubjectId = subject?.SubjectId ,
                TeacherId = teacher?.TeacherId ,
                ClassroomId = classroom?.ClassroomId ,
                Color = GetLessonColor(subject?.CategoryId) ,
                IsRemote = schedule .IsRemote ?? false ,
                ToolTip = CreateToolTip(subjectName , teacherName , classroomNumber , schedule .IsRemote ?? false)
            };
        }

        private string CreateToolTip (string subject , string teacher , string classroom , bool isRemote)
        {
            var tooltip = $"{subject}\n–ü—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å: {teacher}\n–ö–∞–±–∏–Ω–µ—Ç: {classroom}";
            if ( isRemote )
                tooltip += "\nüíª –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ";
            return tooltip;
        }

        private void SetDayCell (ScheduleRow row , int dayOfWeek , LessonCell cell)
        {
            switch ( dayOfWeek )
            {
                case 1: row .Monday = cell; break;
                case 2: row .Tuesday = cell; break;
                case 3: row .Wednesday = cell; break;
                case 4: row .Thursday = cell; break;
                case 5: row .Friday = cell; break;
                case 6: row .Saturday = cell; break;
            }
        }

        private string GetLessonColor (int? categoryId)
        {

            if ( categoryId == null ) return "#F5F5F5";

            switch ( categoryId .Value )
            {
                case 1: return "#E3F2FD"; // –û–û–î - –≥–æ–ª—É–±–æ–π
                case 2: return "#E8F5E8"; // –û–ì–°–≠ - –∑–µ–ª–µ–Ω—ã–π
                case 3: return "#FFF3E0"; // –ï–ù - –æ—Ä–∞–Ω–∂–µ–≤—ã–π
                case 4: return "#F3E5F5"; // –û–ü–¶ - —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
                case 5: return "#E0F2F1"; // –ü–ú - –±–∏—Ä—é–∑–æ–≤—ã–π
                case 6: return "#FFEBEE"; // –ú–î–ö - —Ä–æ–∑–æ–≤—ã–π
                case 7: return "#ECEFF1"; // –ü–†–ê–ö–¢–ò–ö–ê - —Å–µ—Ä—ã–π
                default: return "#F5F5F5"; // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é
            }
        }
    }
}

using ScheduleAppDemo .Core;
using ScheduleAppDemo .MVVM .View;
using System;
using System .Collections .Generic;
using System .ComponentModel;
using System .IO .Packaging;
using System .Linq;
using System .Reflection .Emit;
using System .Runtime .CompilerServices;
using System .Text;
using System .Threading .Tasks;
using System .Windows;
using System .Windows .Input;

namespace ScheduleAppDemo .MVVM .ViewModel
{


     public class MainViewModel : ObservableObject
    {
        // –ö–æ–º–∞–Ω–¥—ã
        public RelayCommand CloseAppCommand { get; set; }
        public RelayCommand LoginViewCommand { get; set; }
        public RelayCommand MainScheduleViewCommand { get; set; }
        public RelayCommand ScheduleEditorViewCommand { get; set; }
        public RelayCommand NewsViewCommand { get; set; }
        public RelayCommand GroupsViewCommand { get; set; }
        public RelayCommand InfoEditorViewCommand { get; set; }

        // ViewModels
        public LoginViewModel LoginView { get; set; }
        public MainScheduleViewModel MainScheduleVM { get; set; }
        public NewsViewModel NewsVM { get; set; }
        public ScheduleEditorViewModel ScheduleEditorVM { get; set; }

        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∫–Ω–æ–ø–æ–∫
        private bool _isMainScheduleActive = false;
        private bool _isScheduleEditorActive = false;
        private bool _isGroupsActive = false;
        private bool _isInfoEditorActive = false;

        public bool IsMainScheduleActive
        {
            get => _isMainScheduleActive;
            set => SetProperty(ref _isMainScheduleActive , value);
        }

        public bool IsScheduleEditorActive
        {
            get => _isScheduleEditorActive;
            set => SetProperty(ref _isScheduleEditorActive , value);
        }

        public bool IsGroupsActive
        {
            get => _isGroupsActive;
            set => SetProperty(ref _isGroupsActive , value);
        }

        public bool IsInfoEditorActive
        {
            get => _isInfoEditorActive;
            set => SetProperty(ref _isInfoEditorActive , value);
        }

        public MainViewModel ( )
        {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ViewModels
            LoginView = new LoginViewModel(this);
            MainScheduleVM = new MainScheduleViewModel();
            NewsVM = new NewsViewModel(this);
            ScheduleEditorVM = new ScheduleEditorViewModel();

            // –°—Ç–∞—Ä—Ç–æ–≤–æ–µ –æ–∫–Ω–æ - –ª–æ–≥–∏–Ω
            CurrentView = LoginView;

            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥ —Å –ü–†–ê–í–ò–õ–¨–ù–´–ú –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
            InitializeCommands();

            CloseAppCommand = new RelayCommand(o => Application .Current .Shutdown());
        }

        private void InitializeCommands ( )
        {
            LoginViewCommand = new RelayCommand(o =>
            {
                CurrentView = LoginView;
                ResetAllButtons();
            });

            MainScheduleViewCommand = new RelayCommand(o =>
            {
                CurrentView = MainScheduleVM;
                SetActiveButton("MainSchedule");
            });

            ScheduleEditorViewCommand = new RelayCommand(o =>
            {
                CurrentView = ScheduleEditorVM;
                SetActiveButton("ScheduleEditor");
            });

            NewsViewCommand = new RelayCommand(o =>
            {
                CurrentView = NewsVM;
                ResetAllButtons();
            });

            GroupsViewCommand = new RelayCommand(o =>
            {
                // –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º MainSchedule
                CurrentView = MainScheduleVM;
                SetActiveButton("Groups");
            });

            InfoEditorViewCommand = new RelayCommand(o =>
            {
                // –í—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–≥–ª—É—à–∫–∞ - –∏—Å–ø–æ–ª—å–∑—É–µ–º ScheduleEditor
                CurrentView = ScheduleEditorVM;
                SetActiveButton("InfoEditor");
            });
        }

        private void SetActiveButton (string buttonName)
        {
            // –°–Ω–∞—á–∞–ª–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º –≤—Å–µ
            ResetAllButtons();

            // –ó–∞—Ç–µ–º –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º –Ω—É–∂–Ω—É—é –∫–Ω–æ–ø–∫—É
            switch ( buttonName )
            {
                case "MainSchedule":
                    IsMainScheduleActive = true;
                    break;
                case "ScheduleEditor":
                    IsScheduleEditorActive = true;
                    break;
                case "Groups":
                    IsGroupsActive = true;
                    break;
                case "InfoEditor":
                    IsInfoEditorActive = true;
                    break;
            }
        }

        private void ResetAllButtons ( )
        {
            IsMainScheduleActive = false;
            IsScheduleEditorActive = false;
            IsGroupsActive = false;
            IsInfoEditorActive = false;
        }

        private string _currentAdminName;
        public string CurrentAdminName
        {
            get => _currentAdminName;
            set => SetProperty(ref _currentAdminName , value);
        }

        private bool _isAuthenticated = false;
        public bool IsAuthenticated
        {
            get => _isAuthenticated;
            set => SetProperty(ref _isAuthenticated , value);
        }

        private object _currentView;
        public object CurrentView
        {
            get => _currentView;
            set
            {
                _currentView = value;
                OnPropertyChanged();
                System .Diagnostics .Debug .WriteLine($"CurrentView changed to: {value?.GetType() .Name}");
            }
        }

        public void ShowNewsView ( )
        {
            CurrentView = NewsVM;
            IsAuthenticated = true;
            ResetAllButtons(); // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –Ω–æ–≤–æ—Å—Ç–∏
        }

        // –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ
        public void ShowMainSchedule ( )
        {
            CurrentView = MainScheduleVM;
            SetActiveButton("MainSchedule");
        }
    }
}
using ScheduleAppDemo .Core;
using ScheduleAppDemo .MVVM .Model;
using ScheduleAppDemo .MVVM .Model .Entities;
using ScheduleAppDemo .MVVM .View;
using System;
using System .Collections .Generic;
using System .Collections .ObjectModel;
using System .Linq;
using System .Text;
using System .Threading .Tasks;
using System .Windows;

namespace ScheduleAppDemo .MVVM .ViewModel
{

    public class ScheduleEditorViewModel : ObservableObject
    {
        // –í—ã–±—Ä–∞–Ω–Ω–∞—è –≥—Ä—É–ø–ø–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        private Group _selectedGroup;
        public Group SelectedGroup
        {
            get => _selectedGroup;
            set
            {
                if ( SetProperty(ref _selectedGroup , value) )
                {
                    OnGroupSelected();
                }
            }
        }

        // –ö–æ–ª–ª–µ–∫—Ü–∏–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞
        public ObservableCollection<Group> Groups { get; set; }
        public ObservableCollection<Subject> Subjects { get; set; }
        public ObservableCollection<Teacher> Teachers { get; set; }
        public ObservableCollection<Classroom> Classrooms { get; set; }
        public ObservableCollection<TimeSlot> TimeSlots { get; set; }

        // –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è 6√ó6 (–ø–∞—Ä—ã √ó –¥–Ω–∏)
        public ObservableCollection<ScheduleRow> ScheduleTable { get; set; }

        // –í—ã–±—Ä–∞–Ω–Ω–∞—è —è—á–µ–π–∫–∞ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        private LessonCell _selectedCell;
        public LessonCell SelectedCell
        {
            get => _selectedCell;
            set => SetProperty(ref _selectedCell , value);
        }

        // –ö–æ–º–∞–Ω–¥—ã
        public RelayCommand SaveScheduleCommand { get; }
        public RelayCommand ClearScheduleCommand { get; }

        public ScheduleEditorViewModel ( )
        {
            Groups = new ObservableCollection<Group>();
            Subjects = new ObservableCollection<Subject>();
            Teachers = new ObservableCollection<Teacher>();
            Classrooms = new ObservableCollection<Classroom>();
            TimeSlots = new ObservableCollection<TimeSlot>();
            ScheduleTable = new ObservableCollection<ScheduleRow>();

            SaveScheduleCommand = new RelayCommand(_ => SaveSchedule());
            ClearScheduleCommand = new RelayCommand(_ => ClearSchedule());

            LoadData();
            InitializeEmptyTable();
        }

        private void LoadData ( )
        {
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –≤—ã–±–æ—Ä–∞
            var groups = DatabaseHelper .GetAllGroups();
            Groups .Clear();
            foreach ( var group in groups )
            {
                Groups .Add(group);
            }

            var subjects = DatabaseHelper .GetAllSubjects();
            Subjects .Clear();
            foreach ( var subject in subjects )
            {
                Subjects .Add(subject);
            }

            var teachers = DatabaseHelper .GetAllTeachers();
            Teachers .Clear();
            foreach ( var teacher in teachers )
            {
                Teachers .Add(teacher);
            }

            var classrooms = DatabaseHelper .GetAllClassrooms();
            Classrooms .Clear();
            foreach ( var classroom in classrooms )
            {
                Classrooms .Add(classroom);
            }

            var timeSlots = DatabaseHelper .GetTimeSlots();
            TimeSlots .Clear();
            foreach ( var timeSlot in timeSlots )
            {
                TimeSlots .Add(timeSlot);
            }
        }

        private void InitializeEmptyTable ( )
        {
            ScheduleTable .Clear();

            // –°–æ–∑–¥–∞–µ–º 6 —Å—Ç—Ä–æ–∫ (–ø–æ –æ–¥–Ω–æ–π –Ω–∞ –∫–∞–∂–¥—É—é –ø–∞—Ä—É)
            for ( int i = 0 ; i < 6 ; i++ )
            {
                var timeSlot = TimeSlots .Count > i ? TimeSlots[i] : null;
                var row = new ScheduleRow
                {
                    TimeDisplay = timeSlot != null ?
                        $"{timeSlot .StartTime:hh\\:mm}-{timeSlot .EndTime:hh\\:mm}\n{timeSlot .PeriodName}" :
                        $"–ü–∞—Ä–∞ {i + 1}" ,
                    TimeSlotId = i + 1 ,
                    Monday = new LessonCell() ,
                    Tuesday = new LessonCell() ,
                    Wednesday = new LessonCell() ,
                    Thursday = new LessonCell() ,
                    Friday = new LessonCell() ,
                    Saturday = new LessonCell()
                };
                ScheduleTable .Add(row);
            }
        }

        private void OnGroupSelected ( )
        {
            if ( SelectedGroup != null )
            {
                // –ú–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
                LoadExistingSchedule();
            }
            else
            {
                InitializeEmptyTable();
            }
        }

        private void LoadExistingSchedule ( )
        {
            if ( SelectedGroup == null ) return;

            try
            {
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∏–∑ –ë–î
                var scheduleEntities = DatabaseHelper .GetScheduleForGroup(SelectedGroup .GroupId);

                // –û—á–∏—â–∞–µ–º —Ç–∞–±–ª–∏—Ü—É
                InitializeEmptyTable();

                // –ó–∞–ø–æ–ª–Ω—è–µ–º —è—á–µ–π–∫–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –ë–î
                foreach ( var schedule in scheduleEntities )
                {
                    var row = ScheduleTable .FirstOrDefault(r => r .TimeSlotId == schedule .TimeslotId);
                    if ( row != null )
                    {
                        var lessonCell = CreateLessonCell(schedule);
                        SetDayCell(row , schedule .DayOfWeek , lessonCell);
                    }
                }
            }
            catch ( System .Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è: {ex .Message}");
            }
        }

        // –ú–µ—Ç–æ–¥ –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤—ã–±—Ä–∞–Ω–Ω–æ–π —è—á–µ–π–∫–∏
        public void UpdateSelectedCell (LessonCell cell , int dayOfWeek , int timeSlotId)
        {
            SelectedCell = cell;

            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —è—á–µ–π–∫–∏
            if ( cell != null )
            {
                ShowEditDialog(cell , dayOfWeek , timeSlotId);
            }
        }

        private void ShowEditDialog (LessonCell cell , int dayOfWeek , int timeSlotId)
        {
            // –°–æ–∑–¥–∞–µ–º –¥–∏–∞–ª–æ–≥–æ–≤–æ–µ –æ–∫–Ω–æ
            var dialogWindow = new Window
            {
                Title = "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏—è" ,
                Width = 460 ,
                Height = 700 ,
                WindowStartupLocation = WindowStartupLocation .CenterOwner ,
                ResizeMode = ResizeMode .NoResize ,
                WindowStyle = WindowStyle .SingleBorderWindow
            };

            // –°–æ–∑–¥–∞–µ–º UserControl –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
            var editDialog = new EditLessonDialog();
            editDialog .DataContext = new EditLessonViewModel(this , cell , dayOfWeek , timeSlotId);

            // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è
            editDialog .SaveClicked += (s , e) => { dialogWindow .DialogResult = true; };
            editDialog .CancelClicked += (s , e) => { dialogWindow .DialogResult = false; };

            dialogWindow .Content = editDialog;

            if ( dialogWindow .ShowDialog() == true )
            {
                MessageBox .Show("–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã!" , "–£—Å–ø–µ—Ö" , MessageBoxButton .OK , MessageBoxImage .Information);
            }
        }
        // –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏–∑ –¥–∏–∞–ª–æ–≥–∞
        public void ApplyLessonEdit (LessonCell updatedCell , int dayOfWeek , int timeSlotId)
        {
            var row = ScheduleTable .FirstOrDefault(r => r .TimeSlotId == timeSlotId);
            if ( row != null )
            {
                SetDayCell(row , dayOfWeek , updatedCell);
            }
        }
        private LessonCell CreateLessonCell (Schedule schedule)
        {
            var subject = Subjects .FirstOrDefault(s => s .SubjectId == schedule .SubjectId);
            var teacher = Teachers .FirstOrDefault(t => t .TeacherId == schedule .TeacherId);
            var classroom = Classrooms .FirstOrDefault(c => c .ClassroomId == schedule .ClassroomId);

            return new LessonCell
            {
                ScheduleId = schedule .ScheduleId ,
                SubjectName = subject?.SubjectName ?? "" ,
                TeacherName = teacher?.FullName ?? "" ,
                Classroom = classroom?.RoomNumber ?? "" ,
                SubjectId = subject?.SubjectId ,
                TeacherId = teacher?.TeacherId ,
                ClassroomId = classroom?.ClassroomId ,
                Color = GetLessonColor(subject?.CategoryId)
            };
        }

        private void SetDayCell (ScheduleRow row , int dayOfWeek , LessonCell cell)
        {
            switch ( dayOfWeek )
            {
                case 1: row .Monday = cell; break;
                case 2: row .Tuesday = cell; break;
                case 3: row .Wednesday = cell; break;
                case 4: row .Thursday = cell; break;
                case 5: row .Friday = cell; break;
                case 6: row .Saturday = cell; break;
            }
        }

        private void SaveSchedule ( )
        {
            if ( SelectedGroup == null )
            {
                MessageBox .Show("–í—ã–±–µ—Ä–∏—Ç–µ –≥—Ä—É–ø–ø—É –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è");
                return;
            }

            try
            {
                // TODO: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
                // 1. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã
                // 2. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–æ–≤–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

                int lessonCount = 0;
                foreach ( var row in ScheduleTable )
                {
                    for ( int day = 1 ; day <= 6 ; day++ )
                    {
                        var cell = GetDayCell(row , day);
                        if ( cell?.SubjectId != null && cell .TeacherId != null && cell .ClassroomId != null )
                        {
                            lessonCount++;
                            // DatabaseHelper.AddScheduleItem(...);
                        }
                    }
                }

                MessageBox .Show($"–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≥—Ä—É–ø–ø—ã {SelectedGroup .GroupName} —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ!\n" +
                              $"–î–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞–Ω—è—Ç–∏–π: {lessonCount}" , "–£—Å–ø–µ—Ö");
            }
            catch ( System .Exception ex )
            {
                MessageBox .Show($"–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: {ex .Message}" , "–û—à–∏–±–∫–∞");
            }
        }

        private void ClearSchedule ( )
        {
            if ( MessageBox .Show("–û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ë —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ?" , "–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ" ,
                MessageBoxButton .YesNo) == MessageBoxResult .Yes )
            {
                InitializeEmptyTable();
            }
        }

        private LessonCell GetDayCell (ScheduleRow row , int dayOfWeek)
        {
            switch ( dayOfWeek )
            {
                case 1: return row .Monday;
                case 2: return row .Tuesday;
                case 3: return row .Wednesday;
                case 4: return row .Thursday;
                case 5: return row .Friday;
                case 6: return row .Saturday;
                default: return null;
            }
        }

        private string GetLessonColor (int? categoryId)
        {
            if ( categoryId == null ) return "#F5F5F5";

            switch ( categoryId .Value )
            {
                case 1: return "#E3F2FD";
                case 2: return "#E8F5E8";
                case 3: return "#FFF3E0";
                case 4: return "#F3E5F5";
                case 5: return "#E0F2F1";
                case 6: return "#FFEBEE";
                case 7: return "#ECEFF1";
                default: return "#F5F5F5";
            }
        }
    }
}
MAINWINDOW
<Window x:Class="ScheduleAppDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
       xmlns:viewModel="clr-namespace:ScheduleAppDemo.MVVM.ViewModel"
xmlns:view="clr-namespace:ScheduleAppDemo.MVVM.View"
        xmlns:local="clr-namespace:ScheduleAppDemo"
        mc:Ignorable="d"
        Title="MainWindow"
        Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">
    
  
    <Border 
        CornerRadius="25"
        Background="Black">

        <Grid Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions >
                <RowDefinition Height="75"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <TextBlock 
                Text="Schedule App"
                FontSize="35" 
                HorizontalAlignment="Center"
                FontFamily="Arial Black"
                Margin="0,12,0,0" 
                VerticalAlignment="Center"
                Foreground="#FFB583F3">
            </TextBlock>
            <StackPanel Grid.Row="1">

                <RadioButton Content="üìÜ –û—Å–Ω–æ–≤–Ω–æ–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ"
                 Command="{Binding MainScheduleViewCommand}"
                 IsChecked="{Binding IsMainScheduleActive}"
                 Height="75" 
                 FontSize="24" 
                 HorizontalAlignment="Left" 
                 Margin="0,10,0,0"
                 Width="295"
                 Style="{StaticResource MenuButtonTheme}"
                 BorderThickness="0,0,0,30" 
                 Foreground="White"
                 FontFamily="Bernard MT Condensed"
                 IsEnabled="{Binding IsAuthenticated}"/>

                <!-- –†–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è -->
                <RadioButton Content="‚úèÔ∏è –†–µ–¥–∞–∫—Ç–æ—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è"
                 Command="{Binding ScheduleEditorViewCommand}"
                 IsChecked="{Binding IsScheduleEditorActive}"
                 Height="75" 
                 FontSize="24" 
                 HorizontalAlignment="Left" 
                 Margin="0,10,0,0"
                 Width="295"
                 Style="{StaticResource MenuButtonTheme}" 
                 BorderThickness="0,0,0,30" 
                 Foreground="White"
                 FontFamily="Bernard MT Condensed"
                 IsEnabled="{Binding IsAuthenticated}"/>

                <!-- –ì—Ä—É–ø–ø—ã -->
                <RadioButton Content="üë• –ì—Ä—É–ø–ø—ã"
                 Command="{Binding GroupsViewCommand}"
                 IsChecked="{Binding IsGroupsActive}"
                 Height="75" 
                 FontSize="24" 
                 HorizontalAlignment="Left" 
                 Margin="0,10,0,0"
                 Width="295"
                 Style="{StaticResource MenuButtonTheme}" 
                 BorderThickness="0,0,0,30"
                 Foreground="White"
                 FontFamily="Bernard MT Condensed"
                 IsEnabled="{Binding IsAuthenticated}"/>

                <!-- –†–µ–¥–∞–∫—Ç–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
                <RadioButton Content="üõ† –†–µ–¥–∞–∫—Ç–æ—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
                 Command="{Binding InfoEditorViewCommand}"
                 IsChecked="{Binding IsInfoEditorActive}"
                 Height="75" 
                 FontSize="24" 
                 HorizontalAlignment="Left" 
                 Margin="0,10,0,0"
                 Width="295"
                 Style="{StaticResource MenuButtonTheme}" 
                 BorderThickness="0,0,0,30" 
                 Foreground="White" 
                 FontFamily="Bernard MT Condensed"
                 IsEnabled="{Binding IsAuthenticated}"/>
            </StackPanel>
            <ContentControl
              Grid.Row="1"
              Grid.Column="1"
              Margin="10"
              Content="{Binding CurrentView}">
                <ContentControl.Resources>
                    <DataTemplate DataType="{x:Type viewModel:LoginViewModel}">
                        <view:LoginView />
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type viewModel:MainScheduleViewModel}">
                        <view:MainScheduleView />
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type viewModel:NewsViewModel}">
                        <view:NewsView />
                    </DataTemplate>
                </ContentControl.Resources>
            </ContentControl>
            <Button 
                 Style="{DynamicResource CloseButtonTheme}"
                Background="{x:Null}"
                   x:Name="CloseAppButton" 
                   Grid.Column="2"
                   Height="50"
                   Width="50"
                   HorizontalAlignment="Right"
                   Margin="10,10,30.2,10" BorderBrush="{x:Null}" Foreground="{x:Null}"
                 Command="{Binding CloseAppCommand}"
                >
                <Image Source="/images/circle-xmark (1).png" 
                       />
                <Button.Resources>
                    <Style  TargetType="Border" >
                <Setter Property="CornerRadius"   Value="50"/>
                 </Style>
                </Button.Resources>
              </Button>
          </Grid>
    </Border>
</Window>

    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow ( )
        {
            InitializeComponent();
            this .DataContext = new MainViewModel();
        }

        private void RadioButton_Checked (object sender , RoutedEventArgs e)
        {

        }
    }
}


