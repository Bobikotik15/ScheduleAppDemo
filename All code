весь код приложения: 
MAINWINDOW : 
<Window x:Class="ScheduleAppDemo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
       xmlns:viewModel="clr-namespace:ScheduleAppDemo.MVVM.ViewModel"
xmlns:view="clr-namespace:ScheduleAppDemo.MVVM.View"
        xmlns:local="clr-namespace:ScheduleAppDemo"
        mc:Ignorable="d"
        Title="MainWindow"
        Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent">
    
  
    <Border 
        CornerRadius="25"
        Background="Black">

        <Grid Background="Transparent">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Grid.RowDefinitions >
                <RowDefinition Height="75"/>
                <RowDefinition/>
            </Grid.RowDefinitions>
            <TextBlock 
                Text="Schedule App"
                FontSize="35" 
                HorizontalAlignment="Center"
                FontFamily="Arial Black"
                Margin="0,12,0,0" 
                VerticalAlignment="Center"
                Foreground="#FFB583F3">
            </TextBlock>
            <StackPanel Grid.Row="1">
                
                <RadioButton Content= "Основное расписание"
                             Height="75" 
                             FontSize="24" 
                             HorizontalAlignment="Left" 
                             Margin="10,10,0,0"
                             Width="290"
                             Style="{StaticResource MenuButtonTheme}"
                             BorderThickness="0,0,0,30" Foreground="White" FontFamily="Bernard MT Condensed"
                            IsChecked="True"
                             IsEnabled="{Binding IsAuthenticated}"
                             Command="{Binding MainScheduleViewCommand}"
                             />
                
                <RadioButton 
                 Content= "Замена расписания"
                  Height="75" 
                  FontSize="24" 
                  HorizontalAlignment="Left" 
                  Margin="10,10,0,0"
                  Width="290"
                  Style="{StaticResource MenuButtonTheme}" 
                  BorderThickness="0,0,0,30" 
                  Foreground="White"
                  FontFamily="Bernard MT Condensed"
                   IsEnabled="{Binding IsAuthenticated}"
                             
              />
                <RadioButton Content= "Группы"
                  Height="75" 
                  FontSize="24" 
                  HorizontalAlignment="Left" 
                  Margin="10,10,0,0"
                  Width="290"
                  Style="{StaticResource MenuButtonTheme}" 
                             BorderThickness="0,0,0,30"
                             Foreground="White"
                             FontFamily="Bernard MT Condensed"
                              IsEnabled="{Binding IsAuthenticated}"  />
                
              <RadioButton Content= "Редактор информации"
              Height="75" 
              FontSize="24" 
              HorizontalAlignment="Left" 
              Margin="10,10,0,0"
              Width="290"
              Style="{StaticResource MenuButtonTheme}" BorderThickness="0,0,0,30" Foreground="White" FontFamily="Bernard MT Condensed"
              IsEnabled="{Binding IsAuthenticated}" />

            </StackPanel>
            <ContentControl
              Grid.Row="1"
              Grid.Column="1"
              Margin="10"
              Content="{Binding CurrentView}">
                <ContentControl.Resources>
                    <DataTemplate DataType="{x:Type viewModel:LoginViewModel}">
                        <view:LoginView />
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type viewModel:MainScheduleViewModel}">
                        <view:MainScheduleView />
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type viewModel:NewsViewModel}">
                        <view:NewsView />
                    </DataTemplate>
                </ContentControl.Resources>
            </ContentControl>
            <Button 
                 Style="{DynamicResource CloseButtonTheme}"
                Background="{x:Null}"
                   x:Name="CloseAppButton" 
                   Grid.Column="2"
                   Height="50"
                   Width="50"
                   HorizontalAlignment="Right"
                   Margin="10,10,30.2,10" BorderBrush="{x:Null}" Foreground="{x:Null}"
                 Command="{Binding CloseAppCommand}"
                >
                <Image Source="/images/circle-xmark (1).png" 
                       />
                <Button.Resources>
                    <Style  TargetType="Border" >
                <Setter Property="CornerRadius"   Value="50"/>
                 </Style>
                </Button.Resources>
              </Button>
          </Grid>
    </Border>
</Window>


namespace ScheduleAppDemo
{
    /// <summary>
    /// Логика взаимодействия для MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow ( )
        {
            InitializeComponent();
            this .DataContext = new MainViewModel();
        }
        
    }
}

0. Model 

namespace ScheduleAppDemo .MVVM .Model
{
    public static class DatabaseHelper
    {
        private static string ConnectionString = @"Data Source=localhost\MSSQLSERVER01;Initial Catalog=schedule database;Integrated Security=True";

        public static bool ValidateAdmin (string login , string password)
        {
            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();

                    string query = "SELECT COUNT(1) FROM Admins WHERE admin_login = @Login AND admin_password = @Password";

                    using ( var command = new SqlCommand(query , connection) )
                    {
                        command .Parameters .AddWithValue("@Login" , login);
                        command .Parameters .AddWithValue("@Password" , password);

                        int count = (int)command .ExecuteScalar();
                        return count > 0;
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"Ошибка подключения: {ex .Message}");
                return false;
            }
        }

        public static AdminInfo GetAdminInfo (string login , string password)
        {
            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    string query = "SELECT admin_name FROM Admins WHERE admin_login = @Login AND admin_password = @Password";

                    using ( var command = new SqlCommand(query , connection) )
                    {
                        command .Parameters .AddWithValue("@Login" , login);
                        command .Parameters .AddWithValue("@Password" , password);

                        using ( var reader = command .ExecuteReader() )
                        {
                            if ( reader .Read() )
                            {
                                return new AdminInfo
                                {
                                    AdminName = reader["admin_name"] .ToString()
                                };
                            }
                        }
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"Ошибка подключения: {ex .Message}");
            }
            return null;
        }

        // Загрузка курсов
        public static List<StudyYear> GetStudyYears ( )
        {
            var studyYears = new List<StudyYear>();

            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    string query = "SELECT study_year_id, year_number, year_name FROM StudyYears ORDER BY year_number";

                    using ( var command = new SqlCommand(query , connection) )
                    using ( var reader = command .ExecuteReader() )
                    {
                        while ( reader .Read() )
                        {
                            studyYears .Add(new StudyYear
                            {
                                Id = reader .GetInt32(0) ,
                                YearNumber = reader .GetInt32(1) ,
                                YearName = reader .GetString(2)
                            });
                        }
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"Ошибка загрузки курсов: {ex .Message}");
            }

            return studyYears;
        }

        // Загрузка специальностей для курса
        public static List<Specialty> GetSpecialtiesByYear (int yearNumber)
        {
            var specialties = new List<Specialty>();

            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    string query = @"
                        SELECT DISTINCT s.specialty_id, s.specialty_name, s.abbreviation, s.color
                        FROM Specialties s
                        INNER JOIN Groups g ON s.specialty_id = g.specialty_id
                        WHERE g.current_year = @YearNumber
                        ORDER BY s.specialty_name";

                    using ( var command = new SqlCommand(query , connection) )
                    {
                        command .Parameters .AddWithValue("@YearNumber" , yearNumber);

                        using ( var reader = command .ExecuteReader() )
                        {
                            while ( reader .Read() )
                            {
                                specialties .Add(new Specialty
                                {
                                    Id = reader .GetInt32(0) ,
                                    Name = reader .GetString(1) ,
                                    Abbreviation = reader .GetString(2) ,
                                    Color = reader .GetString(3)
                                });
                            }
                        }
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"Ошибка загрузки специальностей: {ex .Message}");
            }

            return specialties;
        }

        // Загрузка групп для специальности и курса
        public static List<Group> GetGroupsBySpecialtyAndYear (int specialtyId , int yearNumber)
        {
            var groups = new List<Group>();

            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    string query = @"
                        SELECT group_id, group_name, specialty_id, enrollment_year, current_year, student_count
                        FROM Groups 
                        WHERE specialty_id = @SpecialtyId AND current_year = @YearNumber
                        ORDER BY group_name";

                    using ( var command = new SqlCommand(query , connection) )
                    {
                        command .Parameters .AddWithValue("@SpecialtyId" , specialtyId);
                        command .Parameters .AddWithValue("@YearNumber" , yearNumber);

                        using ( var reader = command .ExecuteReader() )
                        {
                            while ( reader .Read() )
                            {
                                groups .Add(new Group
                                {
                                    Id = reader .GetInt32(0) ,
                                    GroupName = reader .GetString(1) ,
                                    SpecialtyId = reader .GetInt32(2) ,
                                    EnrollmentYear = reader .GetInt32(3) ,
                                    CurrentYear = reader .GetInt32(4) ,
                                    StudentCount = reader .GetInt32(5)
                                });
                            }
                        }
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"Ошибка загрузки групп: {ex .Message}");
            }

            return groups;
        }

        // Загрузка временных слотов
        public static List<TimeSlot> GetTimeSlots ( )
        {
            var timeSlots = new List<TimeSlot>();

            try
            {
                using ( var connection = new SqlConnection(ConnectionString) )
                {
                    connection .Open();
                    string query = "SELECT timeslot_id, start_time, end_time, period_name, period_order FROM TimeSlots ORDER BY period_order";

                    using ( var command = new SqlCommand(query , connection) )
                    using ( var reader = command .ExecuteReader() )
                    {
                        while ( reader .Read() )
                        {
                            timeSlots .Add(new TimeSlot
                            {
                                Id = reader .GetInt32(0) ,
                                StartTime = reader .GetTimeSpan(1) ,
                                EndTime = reader .GetTimeSpan(2) ,
                                PeriodName = reader .GetString(3) ,
                                PeriodOrder = reader .GetInt32(4)
                            });
                        }
                    }
                }
            }
            catch ( Exception ex )
            {
                MessageBox .Show($"Ошибка загрузки временных слотов: {ex .Message}");
            }

            return timeSlots;
        }
    }

    // МОДЕЛИ ДАННЫХ - КАЖДАЯ НА ОТДЕЛЬНОМ УРОВНЕ

    public class AdminInfo
    {
        public string AdminName { get; set; }
    }

    public class StudyYear
    {
        public int Id { get; set; }
        public int YearNumber { get; set; }
        public string YearName { get; set; }
        public override string ToString ( ) => YearName;
    }

    public class Specialty
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public string Abbreviation { get; set; }
        public string Color { get; set; }
        public override string ToString ( ) => Name;
    }

    public class Group
    {
        public int Id { get; set; }
        public string GroupName { get; set; }
        public int SpecialtyId { get; set; }
        public int CurrentYear { get; set; }
        public int EnrollmentYear { get; set; }
        public int StudentCount { get; set; }
        public override string ToString ( ) => GroupName;
    }

    public class TimeSlot
    {
        public int Id { get; set; }
        public TimeSpan StartTime { get; set; }
        public TimeSpan EndTime { get; set; }
        public string PeriodName { get; set; }
        public int PeriodOrder { get; set; }
        public string DisplayTime => $"{PeriodName}\n{StartTime:hh\\:mm}-{EndTime:hh\\:mm}";
    }

    // ВАЖНО: ЭТИ КЛАССЫ ДОЛЖНЫ БЫТЬ НА УРОВНЕ NAMESPACE, А НЕ ВНУТРИ TimeSlot!

    public class ScheduleRow
    {
        public string TimeDisplay { get; set; }
        public int TimeSlotId { get; set; }
        public LessonCell Monday { get; set; }
        public LessonCell Tuesday { get; set; }
        public LessonCell Wednesday { get; set; }
        public LessonCell Thursday { get; set; }
        public LessonCell Friday { get; set; }
        public LessonCell Saturday { get; set; }
    }

    public class LessonCell
    {
        public int? ScheduleId { get; set; }
        public string SubjectName { get; set; }
        public string TeacherName { get; set; }
        public string Classroom { get; set; }
        public string Color { get; set; } = "#E3F2FD";
        public string ToolTip => $"{SubjectName}\n{TeacherName}\n{Classroom}";

        public int? SubjectId { get; set; }
        public int? TeacherId { get; set; }
        public int? ClassroomId { get; set; }
    }
}

1. View 
<UserControl x:Class="ScheduleAppDemo.MVVM.View.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ScheduleAppDemo.MVVM.View" 
             xmlns:viewmodel="clr-namespace:ScheduleAppDemo.MVVM.ViewModel"
             mc:Ignorable="d" 
             d:DesignHeight="705" d:DesignWidth="880">
    <Border 
        Margin="200,30,200,30"
        CornerRadius="30"
       >
        <Border.Background>
            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FF8C2CF1"/>
                <GradientStop Color="#FFB583F3" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="290"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="100"/>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Border
              Height="500"
              Width="400" 
              Margin="48,35,32,10"
              Grid.Row="1" 
              CornerRadius="50"
              Opacity="0.25" 
                Grid.ColumnSpan="3">
                <Border.Background>
                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFFFB289"/>
                        <GradientStop Color="White" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>
            <TextBlock 
                Text="Вход в систему"
                Grid.Column="1"
                FontFamily="Arial Black" 
                FontSize="30"
                HorizontalAlignment="Center" 
                Foreground="White" 
                VerticalAlignment="Center" Width="270"/>
            <StackPanel
                Grid.Row="1"
                Grid.Column="1">
                <TextBlock 
                    Text="Логин" 
                    FontSize="20"
                    Margin="0,150,0,0"
                    Foreground="White"
                    FontWeight="Bold"
                    />
                <TextBox
                    
                 IsEnabled="True" 
                 Focusable="True"
                    x:Name="Logintxtbox" 
                    Style="{StaticResource RoundedTextBoxStyle}"
                         Width="290" 
                         Height="40"
                    Margin="0,5,0,0" FontSize="20"
                    FontFamily="Arial Black"
                    BorderBrush="#FFFFB289"
                    Text="{Binding UserLogin, UpdateSourceTrigger= PropertyChanged}"/>


                <TextBlock
                    Text="Пароль"
                    FontWeight="Bold"
                    Foreground="White"
                    FontSize="20" 
                    Margin="0,40,0,0"
                           />
                <PasswordBox
    x:Name="PasswordboxLogin" 
    Style="{StaticResource RoundedTextBoxStyle}"
    Height="40"
    FontSize="20"
    FontFamily="Segoe UI Black"
    BorderBrush="#FFFFB289"
                    />
                <Grid>
                    <Button x:Name="ButtonOKLogin" 
                     Style="{DynamicResource ShadowButtonStyle}"
                          Content="ОК"
                          Height="50" 
                          Background="#FFFFB289" 
                          Margin="175,20,10,5" 
                          Foreground="White" 
                          FontFamily="Arial Black" 
                          FontSize="20" 
                          BorderBrush="{x:Null}"
                          Command="{Binding LoginCommand}"
                          CommandParameter="{Binding ElementName=PasswordboxLogin}"
                          >
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="10"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button  
                           x:Name="ButtonCencelLogin"
                           Style="{StaticResource ShadowButtonStyle}"
                           Content="Отмена"
                           Height="50" 
                           Background="#FFFFB289" 
                           Margin="10,20,145,5" 
                           Foreground="White" 
                          FontFamily="Arial Black" 
                           FontSize="20"
                           BorderBrush="{x:Null}"
                           Command="{Binding CancelCommand}"
                           CommandParameter="{Binding ElementName=PasswordboxLogin}">

                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="10"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                </Grid>
            </StackPanel>
            <Image
                Height="200"
                Width="200"
                Grid.Column="1"
                Grid.ColumnSpan="2"
                Margin="175,72,10,373"
                Source="/images/test.png" 
                Stretch="Fill"
                Grid.RowSpan="2"/>
            <Image 
                Grid.Row="1"
                Margin="64,59,265,430"
                Source="/images/user.png" RenderTransformOrigin="0.758,0.28" Grid.ColumnSpan="2"
                />
            <Image 
     Grid.Row="1"
     Margin="257,451,54,32"
     Source="/images/password-lock.png" RenderTransformOrigin="0.91,0.567" Grid.Column="1" Grid.ColumnSpan="2"
     />
        </Grid>
    </Border>
</UserControl>

<UserControl x:Class="ScheduleAppDemo.MVVM.View.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ScheduleAppDemo.MVVM.View" 
             xmlns:viewmodel="clr-namespace:ScheduleAppDemo.MVVM.ViewModel"
             mc:Ignorable="d" 
             d:DesignHeight="705" d:DesignWidth="880">
    <Border 
        Margin="200,30,200,30"
        CornerRadius="30"
       >
        <Border.Background>
            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FF8C2CF1"/>
                <GradientStop Color="#FFB583F3" Offset="1"/>
            </LinearGradientBrush>
        </Border.Background>
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition Width="290"/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="100"/>
                <RowDefinition />
            </Grid.RowDefinitions>
            <Border
              Height="500"
              Width="400" 
              Margin="48,35,32,10"
              Grid.Row="1" 
              CornerRadius="50"
              Opacity="0.25" 
                Grid.ColumnSpan="3">
                <Border.Background>
                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                        <GradientStop Color="#FFFFB289"/>
                        <GradientStop Color="White" Offset="1"/>
                    </LinearGradientBrush>
                </Border.Background>
            </Border>
            <TextBlock 
                Text="Вход в систему"
                Grid.Column="1"
                FontFamily="Arial Black" 
                FontSize="30"
                HorizontalAlignment="Center" 
                Foreground="White" 
                VerticalAlignment="Center" Width="270"/>
            <StackPanel
                Grid.Row="1"
                Grid.Column="1">
                <TextBlock 
                    Text="Логин" 
                    FontSize="20"
                    Margin="0,150,0,0"
                    Foreground="White"
                    FontWeight="Bold"
                    />
                <TextBox
                    
                 IsEnabled="True" 
                 Focusable="True"
                    x:Name="Logintxtbox" 
                    Style="{StaticResource RoundedTextBoxStyle}"
                         Width="290" 
                         Height="40"
                    Margin="0,5,0,0" FontSize="20"
                    FontFamily="Arial Black"
                    BorderBrush="#FFFFB289"
                    Text="{Binding UserLogin, UpdateSourceTrigger= PropertyChanged}"/>


                <TextBlock
                    Text="Пароль"
                    FontWeight="Bold"
                    Foreground="White"
                    FontSize="20" 
                    Margin="0,40,0,0"
                           />
                <PasswordBox
    x:Name="PasswordboxLogin" 
    Style="{StaticResource RoundedTextBoxStyle}"
    Height="40"
    FontSize="20"
    FontFamily="Segoe UI Black"
    BorderBrush="#FFFFB289"
                    />
                <Grid>
                    <Button x:Name="ButtonOKLogin" 
                     Style="{DynamicResource ShadowButtonStyle}"
                          Content="ОК"
                          Height="50" 
                          Background="#FFFFB289" 
                          Margin="175,20,10,5" 
                          Foreground="White" 
                          FontFamily="Arial Black" 
                          FontSize="20" 
                          BorderBrush="{x:Null}"
                          Command="{Binding LoginCommand}"
                          CommandParameter="{Binding ElementName=PasswordboxLogin}"
                          >
                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="10"/>
                            </Style>
                        </Button.Resources>
                    </Button>
                    <Button  
                           x:Name="ButtonCencelLogin"
                           Style="{StaticResource ShadowButtonStyle}"
                           Content="Отмена"
                           Height="50" 
                           Background="#FFFFB289" 
                           Margin="10,20,145,5" 
                           Foreground="White" 
                          FontFamily="Arial Black" 
                           FontSize="20"
                           BorderBrush="{x:Null}"
                           Command="{Binding CancelCommand}"
                           CommandParameter="{Binding ElementName=PasswordboxLogin}">

                        <Button.Resources>
                            <Style TargetType="Border">
                                <Setter Property="CornerRadius" Value="10"/>
                            </Style>
                        </Button.Resources>
                    </Button>

                </Grid>
            </StackPanel>
            <Image
                Height="200"
                Width="200"
                Grid.Column="1"
                Grid.ColumnSpan="2"
                Margin="175,72,10,373"
                Source="/images/test.png" 
                Stretch="Fill"
                Grid.RowSpan="2"/>
            <Image 
                Grid.Row="1"
                Margin="64,59,265,430"
                Source="/images/user.png" RenderTransformOrigin="0.758,0.28" Grid.ColumnSpan="2"
                />
            <Image 
     Grid.Row="1"
     Margin="257,451,54,32"
     Source="/images/password-lock.png" RenderTransformOrigin="0.91,0.567" Grid.Column="1" Grid.ColumnSpan="2"
     />
        </Grid>
    </Border>
</UserControl>

<UserControl x:Class="ScheduleAppDemo.MVVM.View.NewsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:ScheduleAppDemo.MVVM.View" 
             xmlns:viewmodel="clr-namespace:ScheduleAppDemo.MVVM.ViewModel"
           
             mc:Ignorable="d" 
             d:DesignHeight="705" d:DesignWidth="880">
    <Grid Margin="20,20,20,20">
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition/>
            <RowDefinition 
               Height="500"/>
        </Grid.RowDefinitions>
        <Border
            Grid.Row="0" 
            CornerRadius="12" 
            Background="#FF4BB1FD"
            Margin="10,44,10,10" 
            RenderTransformOrigin="0.0,0.0" 
            >
            <Border.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform AngleX="0.14"/>
                    <RotateTransform/>
                    <TranslateTransform X="0.123"/>
                </TransformGroup>
            </Border.RenderTransform>
        </Border>
        <Border
            Grid.Column="1"
            CornerRadius="12" 
            Background="#FF854EFF"
          Margin="10,44,10,10" 
    />
        <Border
        Grid.Column="2"
        CornerRadius="12" 
        Margin="10,44,10,10" 
         RenderTransformOrigin="0.0,0.0" 
            Background="#FFEDFF4E">

            <Border.RenderTransform>
                <TransformGroup>
                    <ScaleTransform/>
                    <SkewTransform AngleX="-0.562"/>
                    <RotateTransform/>
                    <TranslateTransform/>
                </TransformGroup>
            </Border.RenderTransform>

        </Border>
        <TextBlock Text="Новости" 
                   Height="30"
                   Margin="10,10,0,0"
                   HorizontalAlignment="Left"
                   VerticalAlignment="Top" 
                   FontFamily="Arial Black" 
                   FontSize="20" 
                   Foreground="White"
                   />
        <Border
            Grid.Row="1" 
            CornerRadius="5"
            Margin="10,10,10,10"
            >
            <Border.Background>
                <LinearGradientBrush EndPoint="1,1" StartPoint="1,0">
                    <GradientStop Color="#FF4BB1FD"/>
                    <GradientStop Color="#FFFFD573"
                                  Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>
        <Border
    Grid.Row="1" 
            Grid.Column="1"
    CornerRadius="5"
    Margin="10,10,10,10"
    >
            <Border.Background>
                <LinearGradientBrush EndPoint="1,1" StartPoint="1,0">
                    <GradientStop Color="#FF854EFF"/>
                    <GradientStop Color="#FFEDFF4E"
                                  Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>
        <Border
    Grid.Row="1" 
            Grid.Column="2"
    CornerRadius="5"
    Margin="10,10,10,10"
    >
            <Border.Background>
                <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                    <GradientStop Color="#FFEDFF4E"/>
                    <GradientStop Color="#FF7AD25B" 
                                  Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
        </Border>
    </Grid>
</UserControl>

2. ViewModel


namespace ScheduleAppDemo .MVVM .ViewModel
{
   public class LoginViewModel : ObservableObject
    {
        private MainViewModel _mainViewModel;
        private string _userLogin;
        public string AdminName { get; private set; }
        public string UserLogin
        {
            get => _userLogin;
            set
            {
                _userLogin = value;
                OnPropertyChanged();
            }
        }

        public RelayCommand LoginCommand { get; set; }
        public RelayCommand CancelCommand { get; set; }
        public LoginViewModel (MainViewModel mainViewModel)
        {
            _mainViewModel = mainViewModel;
            LoginCommand = new RelayCommand(LoginExecute);
            CancelCommand = new RelayCommand(CancelExecute);
        }

        private void LoginExecute (object obj)
        {
            if ( obj is PasswordBox passwordBox )
            {
                string password = passwordBox .Password;

                // Быстрая проверка заполненности
                if ( string .IsNullOrEmpty(UserLogin) || string .IsNullOrEmpty(password) )
                {
                    MessageBox .Show("Введите логин и пароль");
                    return;
                }

                // Получаем информацию об администраторе (включая имя)
                var adminInfo = DatabaseHelper .GetAdminInfo(UserLogin , password);
                if ( adminInfo != null )
                {
                    _mainViewModel .IsAuthenticated = true;
                    _mainViewModel .CurrentAdminName = adminInfo .AdminName; // Передаем имя
                    _mainViewModel .ShowNewsView();
                }
                else
                {
                    MessageBox .Show("Неверный логин или пароль");
                }
            }
        }
        private void CancelExecute (object obj)
        {
            UserLogin = string .Empty;
            if ( obj is PasswordBox passwordBox )
            {
                passwordBox .Password = string .Empty;
            }
        }
    }
}

namespace ScheduleAppDemo .MVVM .ViewModel
{
    public class MainScheduleViewModel

    { 
    
    
    
    }
}

namespace ScheduleAppDemo .MVVM .ViewModel
{

   public  class MainViewModel : ObservableObject
    {
        //Создание команд для обработки действия пользователя 
        public RelayCommand CloseAppCommand { get; set; }
        public RelayCommand LoginViewCommand { get; set; }
        public RelayCommand MainScheduleViewCommand { get; set; }
        public RelayCommand NewsViewCommand { get; set; }

        //Дочерние ViewModels - хранят логику для каждого окна и отвечает за свою часть программы 
        public LoginViewModel LoginView { get; set; }
        public MainScheduleViewModel MainScheduleVM { get; set; }
        public NewsViewModel NewsVM { get; set; }

        //Конструктор (Инициализация) 
        public MainViewModel ( )
        {

            //Создание всех View 
            LoginView = new LoginViewModel(this);
            MainScheduleVM = new MainScheduleViewModel();
            NewsVM = new NewsViewModel(this); // ← Передаем this

            // Установка стартового окна 
            CurrentView = LoginView;

            //Настройка навигации по странице 
            LoginViewCommand = new RelayCommand(o => { CurrentView = LoginView; });
            MainScheduleViewCommand = new RelayCommand(o => { CurrentView = MainScheduleVM; });
            NewsViewCommand = new RelayCommand(o => { CurrentView = NewsVM; });
            CloseAppCommand = new RelayCommand(o => { Application .Current .Shutdown(); });
        }

        private string _currentAdminName;
          public string CurrentAdminName
    {
        get => _currentAdminName;
        set
        {
            _currentAdminName = value;
            OnPropertyChanged();
        }
    }

        private bool _isAuthenticated = false;
        public bool IsAuthenticated
        {
            get => _isAuthenticated;
            set
            {
                _isAuthenticated = value;
                OnPropertyChanged();
            }
        }
        private object _currentView;
        public object CurrentView
        {
            get { return _currentView; }
            set
            {
                _currentView = value;
                OnPropertyChanged(); // Уведомляем View об изменении
            }
        }
        public void ShowNewsView ( )
        {
            CurrentView = NewsVM;
            IsAuthenticated = true;
        }
    }
}
namespace ScheduleAppDemo .MVVM .ViewModel
{
   public  class NewsViewModel : ObservableObject
    {
        private MainViewModel _mainViewModel;

        public string AdminName => _mainViewModel?.CurrentAdminName;

        // Добавьте конструктор с MainViewModel
        public NewsViewModel (MainViewModel mainViewModel)
        {
            _mainViewModel = mainViewModel;
        }

        // Уберите пустой конструктор или сделайте его private
        private NewsViewModel ( )
        {
        }
    }

}

3. AppXaml
<Application x:Class="ScheduleAppDemo.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:ScheduleAppDemo"
             xmlns:viewModel="clr-namespace:ScheduleAppDemo.MVVM.ViewModel"
             xmlns:view="clr-namespace:ScheduleAppDemo.MVVM.View"
             StartupUri="MainWindow.xaml"  >
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Theme/ManuButtonTheme.xaml"/>
                <ResourceDictionary Source="/Theme/TextBoxTheme.xaml" />
                <ResourceDictionary Source="/Theme/ShadowButtonTheme.xaml"/>
                <ResourceDictionary Source="/Theme/CloseButtonTheme.xaml"/>
                <ResourceDictionary Source="/Theme/ComboboxTheme.xaml"/>
                <ResourceDictionary Source="/Theme/DataGridTheme.xaml"/>
                <ResourceDictionary Source="/Theme/DataGridHeadTheme.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            
            <DataTemplate DataType="{x:Type viewModel:LoginViewModel}">
                <view:LoginView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewModel:MainScheduleViewModel}">
                <view:MainScheduleView/>
            </DataTemplate>
            <DataTemplate DataType="{x:Type viewModel:NewsViewModel}">
                <view:NewsView />
            </DataTemplate>
        </ResourceDictionary>
    </Application.Resources>
</Application>

4. Core
namespace ScheduleAppDemo .Core
{
   public  class ObservableObject : INotifyPropertyChanged
    {
        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged ([CallerMemberName] string name = null)
        {
            PropertyChanged?.Invoke(this , new PropertyChangedEventArgs(name));
        }
    }
}



namespace ScheduleAppDemo .Core
{
 public  class RelayCommand : ICommand
    {
        private Action<object> _execute;
        private Func<object , bool> _canExecute;

        public event EventHandler CanExecuteChanged
        {
            add { CommandManager .RequerySuggested += value; }

            remove { CommandManager .RequerySuggested -= value; }
        }
        public RelayCommand (Action<object> execute , Func<object , bool> canExecute = null)
        {
            {
                _execute = execute;
                _canExecute = canExecute;
            }
        }
        public bool CanExecute (object parametr)
        {
            {
                return _canExecute == null || _canExecute(parametr);
            }
        }
        public void Execute (object parametr)
        {
            _execute(parametr);
        }
    }
}





